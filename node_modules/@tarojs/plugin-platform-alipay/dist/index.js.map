{"version":3,"file":"index.js","sources":["../src/template.ts","../src/components.ts","../src/program.ts","../src/index.ts"],"sourcesContent":["import { capitalize, toCamelCase } from '@tarojs/shared'\nimport { RecursiveTemplate } from '@tarojs/shared/dist/template'\n\nexport class Template extends RecursiveTemplate {\n  exportExpr = 'export default'\n  supportXS = true\n  Adapter = {\n    if: 'a:if',\n    else: 'a:else',\n    elseif: 'a:elif',\n    for: 'a:for',\n    forItem: 'a:for-item',\n    forIndex: 'a:for-index',\n    key: 'a:key',\n    xs: 'sjs',\n    type: 'alipay'\n  }\n\n  buildXsTemplate () {\n    return '<import-sjs name=\"xs\" from=\"./utils.sjs\" />'\n  }\n\n  replacePropName (name, value, compName) {\n    if (value === 'eh') return name.replace('bind', 'on')\n    if (compName === 'map' && value.includes('polygons')) {\n      name = 'polygon'\n    }\n    return name\n  }\n\n  getEvents () {\n    return {\n      onTap: 'eh',\n      onTouchMove: 'eh',\n      onTouchEnd: 'eh',\n      onTouchCancel: 'eh',\n      onLongTap: 'eh'\n    }\n  }\n\n  buildThirdPartyAttr (attrs: Set<string>) {\n    return [...attrs].reduce((str, attr) => {\n      if (attr.startsWith('@')) {\n        return str + `on${capitalize(attr.slice(1))}=\"eh\" `\n      } else if (attr.startsWith('bind')) {\n        return str + `${attr}=\"eh\" `\n      } else if (attr.startsWith('on')) {\n        return str + `${attr}=\"eh\" `\n      }\n\n      return str + `${attr}=\"{{ i.${toCamelCase(attr)} }}\" `\n    }, '')\n  }\n\n  createMiniComponents (components): any {\n    const result = super.createMiniComponents(components)\n\n    // 兼容支付宝 2.0 构建\n    delete result.slot\n    delete result['slot-view']\n\n    return result\n  }\n\n  modifyLoopBody = (child: string, nodeName: string) => {\n    if (nodeName === 'picker-view') {\n      return `<picker-view-column>\n        <view a:for=\"{{item.cn}}\" a:key=\"sid\">\n          ${child}\n        </view>\n      </picker-view-column>`\n    }\n    return child\n  }\n\n  modifyLoopContainer = (children: string, nodeName: string) => {\n    if (nodeName === 'picker') {\n      return `\n  <view>${children}</view>\n  `\n    }\n    if (nodeName === 'swiper') {\n      return `\n    <block a:for=\"{{xs.f(i.cn)}}\" a:key=\"sid\">\n      <swiper-item class=\"{{item.cl}}\" style=\"{{item.st}}\" id=\"{{item.uid||item.sid}}\" data-sid=\"{{item.sid}}\">\n        <block a:for=\"{{item.cn}}\" a:key=\"sid\">\n          <template is=\"{{xs.e(0)}}\" data=\"{{i:item}}\" />\n        </block>\n      </swiper-item>\n    </block>\n  `\n    }\n    return children\n  }\n\n  modifyTemplateResult = (res: string, nodeName: string) => {\n    if (nodeName === 'picker-view-column' || nodeName === 'swiper-item') return ''\n    return res\n  }\n\n  modifyThirdPartyLoopBody = () => {\n    // 兼容支付宝 2.0 构建\n    return `<view a:if=\"{{item.nn==='slot'}}\" slot=\"{{item.name}}\" id=\"{{item.uid||item.sid}}\" data-sid=\"{{item.sid}}\">\n        <block a:for=\"{{item.cn}}\" a:key=\"sid\">\n          <template is=\"{{xs.e(0)}}\" data=\"{{i:item}}\" />\n        </block>\n      </view>\n      <template a:else is=\"{{xs.e(0)}}\" data=\"{{i:item}}\" />`\n  }\n\n  buildXSTmpExtra () {\n    return `f: function (l) {\n    return l.filter(function (i) {return i.nn === 'swiper-item'})\n  }`\n  }\n}\n","import { singleQuote } from '@tarojs/shared'\n\nexport const components = {\n  // ======== 调整属性 ========\n  View: {\n    'disable-scroll': 'false',\n    hidden: 'false',\n    bindAppear: '',\n    bindDisappear: '',\n    bindFirstAppear: ''\n  },\n  Text: {\n    'number-of-lines': ''\n  },\n  Map: {\n    skew: '0',\n    rotate: '0',\n    polygons: '[]',\n    'include-padding': '',\n    'ground-overlays': '',\n    'tile-overlay': '',\n    'custom-map-style': '',\n    setting: '{}',\n    optimize: '',\n    bindRegionChange: '',\n    bindPanelTap: ''\n  },\n  Button: {\n    scope: '',\n    'public-id': '',\n    bindGetAuthorize: '',\n    bindError: ''\n  },\n  Checkbox: {\n    bindChange: ''\n  },\n  Input: {\n    'random-number': 'false',\n    controlled: 'false',\n    enableNative: 'false'\n  },\n  Slider: {\n    'track-size': '4',\n    'handle-size': '22',\n    'handle-color': singleQuote('#ffffff')\n  },\n  Switch: {\n    controlled: 'false'\n  },\n  Textarea: {\n    'show-count': 'true',\n    controlled: 'false',\n    enableNative: 'false'\n  },\n  MovableView: {\n    bindChangeEnd: ''\n  },\n  ScrollView: {\n    'scroll-animation-duration': '',\n    'trap-scroll': 'false'\n  },\n  Swiper: {\n    'active-class': '',\n    'changing-class': '',\n    acceleration: 'false',\n    'disable-programmatic-animation': 'false',\n    'disable-touch': 'false',\n    bindAnimationEnd: ''\n  },\n  Image: {\n    'default-source': ''\n  },\n  Canvas: {\n    type: '',\n    width: singleQuote('300px'),\n    height: singleQuote('225px'),\n    bindReady: ''\n  },\n  Video: {\n    'poster-size': singleQuote('contain'),\n    'mobilenet-hint-type': '1',\n    enableNative: 'false',\n    bindLoading: '',\n    bindUserAction: '',\n    bindStop: '',\n    bindRenderStart: ''\n  },\n  // ======== 额外组件 ========\n  Lottie: {\n    autoplay: 'false',\n    path: '',\n    speed: '1.0',\n    repeatCount: '0',\n    autoReverse: 'false',\n    assetsPath: '',\n    placeholder: '',\n    djangoId: '',\n    md5: '',\n    optimize: 'false',\n    bindDataReady: '',\n    bindDataFailed: '',\n    bindAnimationStart: '',\n    bindAnimationEnd: '',\n    bindAnimationRepeat: '',\n    bindAnimationCancel: '',\n    bindDataLoadReady: ''\n  },\n  Lifestyle: {\n    'public-id': '',\n    memo: '',\n    bindFollow: ''\n  },\n  LifeFollow: {\n    sceneId: '',\n    checkFollow: '',\n    bindCheckFollow: '',\n    bindClose: ''\n  },\n  ContactButton: {\n    'tnt-inst-id': '',\n    scene: '',\n    size: '25',\n    color: singleQuote('#00A3FF'),\n    icon: '',\n    'alipay-card-no': '',\n    'ext-info': ''\n  }\n}\n","import { TaroPlatformBase } from '@tarojs/service'\nimport { Template } from './template'\nimport { components } from './components'\n\nconst PACKAGE_NAME = '@tarojs/plugin-platform-alipay'\n\nexport default class Alipay extends TaroPlatformBase {\n  platform = 'alipay'\n  globalObject = 'my'\n  runtimePath = `${PACKAGE_NAME}/dist/runtime`\n  taroComponentsPath = `${PACKAGE_NAME}/dist/components-react`\n  fileType = {\n    templ: '.axml',\n    style: '.acss',\n    config: '.json',\n    script: '.js',\n    xs: '.sjs'\n  }\n\n  template = new Template()\n\n  /**\n   * 1. setupTransaction - init\n   * 2. setup\n   * 3. setupTransaction - close\n   * 4. buildTransaction - init\n   * 5. build\n   * 6. buildTransaction - close\n   */\n  constructor (ctx, config) {\n    super(ctx, config)\n\n    this.setupTransaction.addWrapper({\n      close () {\n        this.modifyMiniConfigs()\n        this.modifyComponents()\n        this.modifyWebpackConfig()\n        this.generateProjectConfig('project.alipay.json', 'mini.project.json')\n      }\n    })\n  }\n\n  /**\n   * 转换用户编写的配置（微信小程序标准）为支付宝小程序标准\n   */\n  modifyMiniConfigs () {\n    this.ctx.modifyMiniConfigs(({ configMap }) => {\n      const replaceKeyMap = {\n        navigationBarTitleText: 'defaultTitle',\n        navigationBarBackgroundColor: 'titleBarColor',\n        enablePullDownRefresh: 'pullRefresh',\n        list: 'items',\n        text: 'name',\n        iconPath: 'icon',\n        selectedIconPath: 'activeIcon',\n        color: 'textColor'\n      }\n      Object.keys(configMap).forEach(key => {\n        const item = configMap[key]\n        if (item.content) {\n          this.recursiveReplaceObjectKeys(item.content, replaceKeyMap)\n        }\n      })\n    })\n  }\n\n  /**\n   * 增加组件或修改组件属性\n   */\n  modifyComponents () {\n    const { internalComponents } = this.template\n    this.template.mergeComponents(this.ctx, components)\n    this.modifySlider(internalComponents.Slider)\n    this.modifySwiper(internalComponents.Swiper)\n  }\n\n  /**\n   * 修改 Slider 组件属性\n   */\n  modifySlider (slider) {\n    delete slider['block-size']\n    delete slider['block-color']\n  }\n\n  /**\n   * 修改 Swiper 组件属性\n   */\n  modifySwiper (swiper) {\n    delete swiper.bindAnimationFinish\n  }\n\n  /**\n   * 修改 Webpack 配置\n   */\n  modifyWebpackConfig () {\n    this.ctx.modifyWebpackChain(({ chain }) => {\n      // 支付宝系小程序全局就有 navigator 对象，不需要模拟\n      chain.plugin('providerPlugin')\n        .tap(args => {\n          const newArgs = Object.assign({}, args[0])\n          delete newArgs.navigator\n          return [newArgs]\n        })\n    })\n  }\n}\n","import Alipay from './program'\nimport type { IPluginContext } from '@tarojs/service'\n\n// 让其它平台插件可以继承此平台\nexport { Alipay }\n\nlet registedModifyPageTemplate = false\nexport default (ctx: IPluginContext) => {\n  ctx.registerPlatform({\n    name: 'alipay',\n    useConfigName: 'mini',\n    async fn ({ config }) {\n      !registedModifyPageTemplate && modifyPageTemplate(ctx)\n      const program = new Alipay(ctx, config)\n      await program.start()\n    }\n  })\n}\n\nfunction getIsBuildPluginPath (filePath, isBuildPlugin) {\n  return isBuildPlugin ? `plugin/${filePath}` : filePath\n}\n\n// 支付宝小程序中，如果某个页面依赖了原生小程序组件，\n// 那么这个页面不能使用公共模板 base.axml，\n// 而需要把公共模板的内容在此页面的模板中复制一份, 。\nfunction modifyPageTemplate (ctx: IPluginContext) {\n  registedModifyPageTemplate = true\n  ctx.modifyBuildAssets(({ assets, miniPlugin }) => {\n    const pages: string[] = []\n\n    // 筛选出使用了自定义组件的页面\n    miniPlugin.pages.forEach(page => {\n      const config = miniPlugin.filesConfig[miniPlugin.getConfigFilePath(page.name)].content\n      if (!page.isNative && config?.hasOwnProperty('usingComponents') && Object.keys(config.usingComponents).length) {\n        pages.push(page.name)\n      }\n    })\n\n    if (!pages.length) return\n\n    const baseXml = assets[getIsBuildPluginPath('base.axml', miniPlugin.options.isBuildPlugin)].source()\n\n    pages.forEach(page => {\n      const templateName = `${page}.axml`\n      const assetsItem = assets[templateName]\n      const src = assetsItem._value ? assetsItem._value.toString() : assetsItem.source()\n      let relativePath\n      const templateCaller = src.replace(/<import src=\"(.*)base\\.axml\"\\/>/, function (_, $1) {\n        relativePath = $1\n        return ''\n      })\n      const main = baseXml.replace(/<import-sjs name=\"xs\" from=\"(.*)utils.sjs\" \\/>/, function () {\n        return `<import-sjs name=\"xs\" from=\"${relativePath}utils.sjs\" />`\n      })\n\n      const res = `${templateCaller}\n${main}`\n      assets[templateName] = {\n        size: () => res.length,\n        source: () => res\n      }\n    })\n    if (miniPlugin.options.isBuildPlugin) {\n      const miniProjectJSONStr = JSON.stringify({\n        miniprogramRoot: 'miniprogram',\n        pluginRoot: 'plugin',\n        compileType: 'plugin'\n      }, null, 2)\n      assets['mini.project.json'] = {\n        size: () => miniProjectJSONStr.length,\n        source: () => miniProjectJSONStr\n      }\n      const pluginJSON = JSON.parse(assets['/plugin/plugin.json'].source())\n      pluginJSON.publicPages = pluginJSON.pages\n      delete pluginJSON.pages\n      const pluginJSONStr = JSON.stringify(pluginJSON, null, 2)\n      assets['/plugin/plugin.json'] = {\n        size: () => pluginJSONStr.length,\n        source: () => pluginJSONStr\n      }\n    }\n  })\n}\n"],"names":["RecursiveTemplate","capitalize","toCamelCase","singleQuote","TaroPlatformBase"],"mappings":"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"}