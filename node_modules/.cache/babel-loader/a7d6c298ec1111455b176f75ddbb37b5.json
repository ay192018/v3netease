{"remainingRequest":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\HTML工程\\项目\\v3netease-main\\src\\components\\video\\index.vue?vue&type=template&id=ace09d44&scoped=true","dependencies":[{"path":"D:\\HTML工程\\项目\\v3netease-main\\src\\components\\video\\index.vue","mtime":1648305609693},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1646661867650},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1646661868754},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1646661868754},{"path":"D:\\HTML工程\\项目\\v3netease-main\\babel.config.js","mtime":1648433159389},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1646661867650},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1646661868754},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1646661868754}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBjcmVhdGVFbGVtZW50Vk5vZGUgYXMgX2NyZWF0ZUVsZW1lbnRWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoU2NvcGVJZCA9IGZ1bmN0aW9uIF93aXRoU2NvcGVJZChuKSB7CiAgcmV0dXJuIF9wdXNoU2NvcGVJZCgiZGF0YS12LWFjZTA5ZDQ0IiksIG4gPSBuKCksIF9wb3BTY29wZUlkKCksIG47Cn07Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogInZpZGVvIgp9Owp2YXIgX2hvaXN0ZWRfMiA9IFsic3JjIl07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfdmFuX2ljb24gPSBfcmVzb2x2ZUNvbXBvbmVudCgidmFuLWljb24iKTsKCiAgdmFyIF9jb21wb25lbnRfdmFuX25hdl9iYXIgPSBfcmVzb2x2ZUNvbXBvbmVudCgidmFuLW5hdi1iYXIiKTsKCiAgdmFyIF9jb21wb25lbnRfVnVlRGFubWFrdSA9IF9yZXNvbHZlQ29tcG9uZW50KCJWdWVEYW5tYWt1Iik7CgogIHZhciBfY29tcG9uZW50X0RhdGEgPSBfcmVzb2x2ZUNvbXBvbmVudCgiRGF0YSIpOwoKICB2YXIgX2NvbXBvbmVudF92YW5fc2xpZGVyID0gX3Jlc29sdmVDb21wb25lbnQoInZhbi1zbGlkZXIiKTsKCiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X3Zhbl9uYXZfYmFyLCB7CiAgICBib3JkZXI6IGZhbHNlLAogICAgb25DbGlja0xlZnQ6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJHNldHVwLnJvdXRlci5iYWNrKCk7CiAgICB9KQogIH0sIHsKICAgIGxlZnQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF92YW5faWNvbiwgewogICAgICAgIG5hbWU6ICJhcnJvdy1sZWZ0IiwKICAgICAgICBjb2xvcjogIiNmZmYiLAogICAgICAgIHNpemU6ICIyNCIKICAgICAgfSldOwogICAgfSksCiAgICBfOiAxCiAgICAvKiBTVEFCTEUgKi8KCiAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1Z1ZURhbm1ha3UsIHsKICAgIGRhbm11czogJHNldHVwLmRhbm11cywKICAgIHJlZjogImRhbm1ha3UiLAogICAgbG9vcDogdHJ1ZSwKICAgIGNsYXNzOiAiRGFubWFrdSIsCiAgICByaWdodDogNCwKICAgIHNwZWVkczogMTAwLAogICAgZGVib3VuY2U6IDEwMDAsCiAgICByYW5kb21DaGFubmVsOiB0cnVlCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbImRhbm11cyJdKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgidmlkZW8iLCB7CiAgICBzcmM6ICRzZXR1cC51cmwsCiAgICBjbGFzczogImNvbnRyb2xzIiwKICAgIHJlZjogInZpZGVvIiwKICAgIGF1dG9wbGF5OiAiIiwKICAgIG9uQ2xpY2s6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJHNldHVwLnBsYXlzdGF0dXMgJiYgJHNldHVwLnBsYXlzdGF0dXMuYXBwbHkoJHNldHVwLCBhcmd1bWVudHMpOwogICAgfSksCiAgICBvblRpbWV1cGRhdGU6IF9jYWNoZVsyXSB8fCAoX2NhY2hlWzJdID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJHNldHVwLm9uVGltZXVwZGF0ZSAmJiAkc2V0dXAub25UaW1ldXBkYXRlLmFwcGx5KCRzZXR1cCwgYXJndW1lbnRzKTsKICAgIH0pLAogICAgb25Mb2FkZWRtZXRhZGF0YTogX2NhY2hlWzNdIHx8IChfY2FjaGVbM10gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkc2V0dXAubG9hZGVkbWV0YWRhdGEgJiYgJHNldHVwLmxvYWRlZG1ldGFkYXRhLmFwcGx5KCRzZXR1cCwgYXJndW1lbnRzKTsKICAgIH0pLAogICAgb25FbmRlZDogX2NhY2hlWzRdIHx8IChfY2FjaGVbNF0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkc2V0dXAuZW5kZWQgJiYgJHNldHVwLmVuZGVkLmFwcGx5KCRzZXR1cCwgYXJndW1lbnRzKTsKICAgIH0pCiAgfSwgbnVsbCwgNDAKICAvKiBQUk9QUywgSFlEUkFURV9FVkVOVFMgKi8KICAsIF9ob2lzdGVkXzIpLCAkc2V0dXAuaWNvbiA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X3Zhbl9pY29uLCB7CiAgICBrZXk6IDAsCiAgICBuYW1lOiAicGxheSIsCiAgICBvbkNsaWNrOiAkc2V0dXAucGxheSwKICAgIGNvbG9yOiAiI2ZmZiIsCiAgICBzaXplOiAiNTAiLAogICAgY2xhc3M6ICJwbGF5IgogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJvbkNsaWNrIl0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoInYtaWYiLCB0cnVlKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfRGF0YSwgewogICAgZGF0YTogJHNldHVwLmRhdGFzLAogICAgYXR0cnM6ICRzZXR1cC5hdHRycy5pZAogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJkYXRhIiwgImF0dHJzIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF92YW5fc2xpZGVyLCB7CiAgICBtb2RlbFZhbHVlOiAkc2V0dXAudmFsdWUsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVs1XSB8fCAoX2NhY2hlWzVdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJHNldHVwLnZhbHVlID0gJGV2ZW50OwogICAgfSksCiAgICBvbkNoYW5nZTogJHNldHVwLm9uQ2hhbmdlLAogICAgImFjdGl2ZS1jb2xvciI6ICJyZWQiLAogICAgImJ1dHRvbi1zaXplIjogIjE1IiwKICAgIGNsYXNzOiAic2xpZGVyIiwKICAgIG1pbjogIjAiLAogICAgbWF4OiAkc2V0dXAuZHVyYXRpb24KICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsibW9kZWxWYWx1ZSIsICJvbkNoYW5nZSIsICJtYXgiXSldKTsKfQ=="},{"version":3,"sources":["D:\\HTML工程\\项目\\v3netease-main\\src\\components\\video\\index.vue"],"names":[],"mappings":";;;;;;;AAyMO,EAAA,KAAK,EAAC;;;;;;;;;;;;;;uBAAX,mBAAA,CAqCM,KArCN,EAAA,UAAA,EAqCM,CApCJ,YAAA,CAEe,sBAFf,EAEe;AAFD,IAAA,MAAM,EAAE,KAEP;AAFe,IAAA,WAAU,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,MAAA,CAAA,MAAA,CAAO,IAAP,EAAF;AAAA,KAAA;AAEzB,GAFf,E;AACa,IAAA,IAAI,EAAA,QAAA,CAAC;AAAA,aAAqD,CAArD,YAAA,CAAqD,mBAArD,EAAqD;AAA3C,QAAA,IAAI,EAAC,YAAsC;AAAzB,QAAA,KAAK,EAAC,MAAmB;AAAZ,QAAA,IAAI,EAAC;AAAO,OAArD,CAAqD,CAArD;AAAA,KAAD,C;;;;GADjB,CAoCI,EAhCJ,YAAA,CASE,qBATF,EASE;AARC,IAAA,MAAM,EAAE,MAAA,CAAA,MAQT;AAPA,IAAA,GAAG,EAAC,SAOJ;AANC,IAAA,IAAI,EAAE,IAMP;AALA,IAAA,KAAK,EAAC,SAKN;AAJC,IAAA,KAAK,EAAE,CAIR;AAHC,IAAA,MAAM,EAAE,GAGT;AAFC,IAAA,QAAQ,EAAE,IAEX;AADC,IAAA,aAAa,EAAE;AAChB,GATF,E,IAAA,E;;AAAA,I,UAAA,CAgCI,EArBJ,mBAAA,CASE,OATF,EASE;AARC,IAAA,GAAG,EAAE,MAAA,CAAA,GAQN;AAPA,IAAA,KAAK,EAAC,UAON;AANA,IAAA,GAAG,EAAC,OAMJ;AALA,IAAA,QAAQ,EAAR,EAKA;AAJC,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,UAAA,IAAA,MAAA,CAAA,UAAA,OAAA,MAAA,YAAF;AAAA,KAAA,CAIN;AAHC,IAAA,YAAU,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,YAAA,IAAA,MAAA,CAAA,YAAA,OAAA,MAAA,YAAF;AAAA,KAAA,CAGX;AAFC,IAAA,gBAAc,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,cAAA,IAAA,MAAA,CAAA,cAAA,OAAA,MAAA,YAAF;AAAA,KAAA,CAEf;AADC,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,KAAA,IAAA,MAAA,CAAA,KAAA,OAAA,MAAA,YAAF;AAAA,KAAA;AACN,GATF,E,IAAA,E;;AAAA,I,UAAA,CAqBI,EAX0E,MAAA,CAAA,I,kBAA9E,YAAA,CAAsF,mBAAtF,EAAsF;UAAA;AAA5E,IAAA,IAAI,EAAC,MAAuE;AAA/D,IAAA,OAAK,EAAE,MAAA,CAAA,IAAwD;AAAlD,IAAA,KAAK,EAAC,MAA4C;AAArC,IAAA,IAAI,EAAC,IAAgC;AAA3B,IAAA,KAAK,EAAC;AAAqB,GAAtF,E,IAAA,E;;AAAA,I,WAAA,C,qCAWI,EAVJ,YAAA,CAAwC,eAAxC,EAAwC;AAAjC,IAAA,IAAI,EAAE,MAAA,CAAA,KAA2B;AAAnB,IAAA,KAAK,EAAE,MAAA,CAAA,KAAA,CAAM;AAAM,GAAxC,E,IAAA,E;;AAAA,I,iBAAA,CAUI,EATJ,YAAA,CAQE,qBARF,EAQE;gBAPS,MAAA,CAAA,KAOT;;aAPS,MAAA,CAAA,K,GAAK,M;MAOd;AANC,IAAA,QAAM,EAAE,MAAA,CAAA,QAMT;AALA,oBAAa,KAKb;AAJA,mBAAY,IAIZ;AAHA,IAAA,KAAK,EAAC,QAGN;AAFA,IAAA,GAAG,EAAC,GAEJ;AADC,IAAA,GAAG,EAAE,MAAA,CAAA;AACN,GARF,E,IAAA,E;;AAAA,I,iCAAA,CASI,CArCN,C","sourcesContent":["<script>\r\nimport {\r\n  getvideodetail,\r\n  getvideourl,\r\n  getvideocomment,\r\n  getmvcomment,\r\n  getvideorelated,\r\n  getmvdetail,\r\n  getmvurl,\r\n} from '@/api/video.js';\r\nimport { nextTick, onMounted } from '@vue/runtime-core';\r\nimport { useRouter } from 'vue-router';\r\nimport VueDanmaku from 'vue3-danmaku';\r\nimport { ref, reactive, provide } from 'vue';\r\nimport Data from './components/data.vue';\r\n\r\nexport default {\r\n  name:\"videoid\",\r\n  components: { VueDanmaku, Data },\r\n  setup(props, { attrs }) {\r\n    const datas = reactive({\r\n      data: {},\r\n      creator: {},\r\n      vid: '',\r\n      artists: null,\r\n    });\r\n\r\n    const value = ref(0);\r\n    const onChange = (value) => {\r\n      video.value.currentTime = value;\r\n    };\r\n    const url = ref('');\r\n    const video = ref(null);\r\n    const danmaku = ref(null);\r\n    const router = useRouter();\r\n    const icon = ref(false);\r\n    const danmus = ref([]);\r\n    const duration = ref(0);\r\n\r\n    const playstatus = () => {\r\n      //播放状态\r\n      if (video.value.paused && video.value.readyState === 4) {\r\n        nextTick(() => {\r\n          video.value.play();\r\n          icon.value = !icon.value;\r\n          danmaku.value.play();\r\n        });\r\n      } else {\r\n        nextTick(() => {\r\n          video.value.pause();\r\n          icon.value = !icon.value;\r\n          danmaku.value.pause();\r\n        });\r\n      }\r\n    };\r\n    const ended = () => {\r\n      icon.value = !icon.value;\r\n      nextTick(() => {\r\n        danmaku.value.stop();\r\n      });\r\n    };\r\n    const loadedmetadata = (e) => {\r\n      duration.value = e.target.duration;\r\n      // console.log(duration.value);\r\n    };\r\n    const play = () => {\r\n      nextTick(() => {\r\n        video.value.play();\r\n      });\r\n      icon.value = !icon.value;\r\n    };\r\n    const onTimeupdate = (e) => {\r\n      value.value = e.target.currentTime;\r\n    };\r\n\r\n    onMounted(async () => {\r\n      if (attrs.id.length > 8) {\r\n        const { data } = await getvideodetail({\r\n          //视频详情\r\n          id: attrs.id,\r\n        });\r\n        // console.log(data);\r\n        const res = await getvideourl({\r\n          //视频地址\r\n          id: attrs.id,\r\n        });\r\n        const comment = await getvideocomment({\r\n          //视频评论弹幕\r\n          id: attrs.id,\r\n          limit: 20,\r\n        });\r\n        let arr = [];\r\n        comment.data.comments.forEach((item) => {\r\n          arr.push(item.content);\r\n        });\r\n        danmus.value = arr;\r\n\r\n        datas.data = data.data;\r\n        datas.creator = data.data.creator;\r\n        datas.vid = data.data.vid;\r\n        url.value = res.data.urls[0].url;\r\n        console.log(url);\r\n      } else {\r\n        const data = await getmvdetail({\r\n          //mv\r\n          mvid: attrs.id,\r\n        });\r\n        const res = await getmvurl({\r\n          //视频地址\r\n          id: attrs.id,\r\n        });\r\n        const comment = await getmvcomment({\r\n          //视频评论弹幕\r\n          id: attrs.id,\r\n          limit: 100,\r\n        });\r\n        // console.log(data.data.data);\r\n        datas.data = data.data.data;\r\n        url.value = res.data.data.url;\r\n        console.log(url.value);\r\n        let arr = [];\r\n        comment.data.comments.forEach((item) => {\r\n          arr.push(item.content);\r\n        });\r\n        danmus.value = arr;\r\n\r\n        datas.vid = data.data.vid;\r\n\r\n        datas.artists = data.data.data.artists[0];\r\n\r\n        console.log(datas);\r\n      }\r\n    });\r\n    return {\r\n      datas,\r\n      url,\r\n      video,\r\n      router,\r\n      danmus,\r\n      danmaku,\r\n      playstatus,\r\n      icon,\r\n      play,\r\n      onChange,\r\n      value,\r\n      onTimeupdate,\r\n      loadedmetadata,\r\n      duration,\r\n      attrs,\r\n      ended,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.video {\r\n  background: #000;\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  z-index: 3000;\r\n  width: 100%;\r\n  height: 100%;\r\n  .controls {\r\n    z-index: -1;\r\n    width: 100%;\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    top: 50%;\r\n    transform: translateY(-70%);\r\n  }\r\n  /deep/ .van-nav-bar {\r\n    background: transparent;\r\n  }\r\n  .Danmaku {\r\n    width: 100%;\r\n    height: 20vh;\r\n    position: fixed;\r\n    left: 0;\r\n    top: 10vh;\r\n    right: 0;\r\n  }\r\n  .play {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -150%);\r\n  }\r\n  .slider {\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 3vh;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"video\">\r\n    <van-nav-bar :border=\"false\" @click-left=\"router.back()\">\r\n      <template #left><van-icon name=\"arrow-left\" color=\"#fff\" size=\"24\" /> </template\r\n    ></van-nav-bar>\r\n\r\n    <VueDanmaku\r\n      :danmus=\"danmus\"\r\n      ref=\"danmaku\"\r\n      :loop=\"true\"\r\n      class=\"Danmaku\"\r\n      :right=\"4\"\r\n      :speeds=\"100\"\r\n      :debounce=\"1000\"\r\n      :randomChannel=\"true\"\r\n    />\r\n\r\n    <video\r\n      :src=\"url\"\r\n      class=\"controls\"\r\n      ref=\"video\"\r\n      autoplay\r\n      @click=\"playstatus\"\r\n      @timeupdate=\"onTimeupdate\"\r\n      @loadedmetadata=\"loadedmetadata\"\r\n      @ended=\"ended\"\r\n    />\r\n    <van-icon name=\"play\" @click=\"play\" color=\"#fff\" size=\"50\" class=\"play\" v-if=\"icon\" />\r\n    <Data :data=\"datas\" :attrs=\"attrs.id\" />\r\n    <van-slider\r\n      v-model=\"value\"\r\n      @change=\"onChange\"\r\n      active-color=\"red\"\r\n      button-size=\"15\"\r\n      class=\"slider\"\r\n      min=\"0\"\r\n      :max=\"duration\"\r\n    />\r\n  </div>\r\n</template>\r\n"],"sourceRoot":""}]}