{"remainingRequest":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\HTML工程\\项目\\v3netease-main\\src\\components\\audio\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\HTML工程\\项目\\v3netease-main\\src\\components\\audio\\index.vue","mtime":1648232396127},{"path":"D:\\HTML工程\\项目\\v3netease-main\\babel.config.js","mtime":1648433171114},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1646661867650},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1646661868754}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJ2YW50L2VzL3RvYXN0L3N0eWxlL2xlc3MiOwppbXBvcnQgX1RvYXN0IGZyb20gInZhbnQvZXMvdG9hc3QiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwppbXBvcnQgSW5mbyBmcm9tICcuL2luZm8udnVlJzsKaW1wb3J0IHsgcmVmLCB3YXRjaEVmZmVjdCwgbmV4dFRpY2sgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgUGxheWxpc3QgZnJvbSAnLi4vcGxheWxpc3QvJzsKaW1wb3J0IHsgcmFuZG9tIH0gZnJvbSAnQC9VdGlsL2ZsdHRlci5qcyc7CmltcG9ydCB7IHNob3cgfSBmcm9tICdAL2hvb2tzL3N0YXR1cy5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXVkaW8nLAogIGNvbXBvbmVudHM6IHsKICAgIEluZm86IEluZm8sCiAgICBQbGF5bGlzdDogUGxheWxpc3QKICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgX3JlZikgewogICAgdmFyIGVtaXQgPSBfcmVmLmVtaXQ7CiAgICB2YXIgYXVkaW8gPSByZWYobnVsbCk7CiAgICB2YXIgY3VycmVudFRpbWUgPSByZWYoMCk7IC8v5b2T5YmN5pKt5pS+5pe26Ze0CgogICAgdmFyIGR1cmF0aW9uID0gcmVmKDApOyAvL+W9k+WJjeatjOabsumVv+W6pgoKICAgIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICB2YXIgcGxheWxpc3QgPSByZWYoZmFsc2UpOwoKICAgIHZhciBzaG93UG9wdXAgPSBmdW5jdGlvbiBzaG93UG9wdXAoKSB7CiAgICAgIGlmIChzdG9yZS5zdGF0ZS5zb25nbGlzdC5sZW5ndGgpIHsKICAgICAgICBzaG93LnZhbHVlID0gdHJ1ZTsKICAgICAgfQogICAgfTsKCiAgICB2YXIgcGxheXN0YXRlID0gZnVuY3Rpb24gcGxheXN0YXRlKCkgewogICAgICBwbGF5bGlzdC52YWx1ZSA9ICFwbGF5bGlzdC52YWx1ZTsKICAgIH07CiAgICAvKioKICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0g5o6l5pS25biD5bCU5YC85pS55Y+Y54i257qn5by55Ye65bGC54q25oCBCiAgICAgKi8KCgogICAgdmFyIGNoYW5nZXNob3cgPSBmdW5jdGlvbiBjaGFuZ2VzaG93KHZhbCkgewogICAgICBzaG93LnZhbHVlID0gdmFsOwogICAgfTsKCiAgICB2YXIgY2FucGxheSA9IGZ1bmN0aW9uIGNhbnBsYXkoKSB7CiAgICAgIF9Ub2FzdC5jbGVhcigpOwogICAgfTsKCiAgICB2YXIgcGxheSA9IGZ1bmN0aW9uIHBsYXkoKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdzZXRpc3BsYXknKTsKCiAgICAgIGlmIChzdG9yZS5zdGF0ZS5pc3BsYXkgJiYgc3RvcmUuc3RhdGUuYXVkaW8ucmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgICAgc3RvcmUuc3RhdGUuYXVkaW8ucGxheSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0b3JlLnN0YXRlLmF1ZGlvLnBhdXNlKCk7CiAgICAgIH0KICAgIH07CgogICAgdmFyIGVuZGVkID0gZnVuY3Rpb24gZW5kZWQoKSB7CiAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnc2V0aXNwbGF5Jyk7CiAgICAgICAgc3RvcmUuc3RhdGUuYXVkaW8ucGF1c2UoKTsKICAgICAgfSk7CgogICAgICBpZiAoc3RvcmUuc3RhdGUuc29uZ2xpc3QubGVuZ3RoIDwgc3RvcmUuc3RhdGUuY3VycmV0ICsgMikgewogICAgICAgIF9Ub2FzdC5mYWlsKCfmsqHmnInkuIvkuIDpppblkq8nKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBfVG9hc3QubG9hZGluZyh7CiAgICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsCiAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgbG9hZGluZ1R5cGU6ICdzcGlubmVyJwogICAgICB9KTsKCiAgICAgIGlmIChzdG9yZS5zdGF0ZS5wbGF5bW9kZWwgPT09IDApIHsKICAgICAgICBzdG9yZS5jb21taXQoJ3NldGN1cnJldCcsIHN0b3JlLnN0YXRlLmN1cnJldCArIDEpOwogICAgICB9IGVsc2UgaWYgKHN0b3JlLnN0YXRlLnBsYXltb2RlbCA9PT0gMSkgewogICAgICAgIGNvbnNvbGUubG9nKHJhbmRvbSgwLCBzdG9yZS5zdGF0ZS5zb25nbGlzdC5sZW5ndGggLSAxKSk7CiAgICAgICAgc3RvcmUuY29tbWl0KCdzZXRjdXJyZXQnLCByYW5kb20oMCwgc3RvcmUuc3RhdGUuc29uZ2xpc3QubGVuZ3RoIC0gMSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0b3JlLmNvbW1pdCgnc2V0Y3VycmV0Jywgc3RvcmUuc3RhdGUuY3VycmV0KTsKICAgICAgfQoKICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHN0b3JlLnN0YXRlLmF1ZGlvLnBsYXkoKTsKCiAgICAgICAgaWYgKHN0b3JlLnN0YXRlLmF1ZGlvLnBsYXllZCkgewogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ3NldGlzcGxheScpOwoKICAgICAgICAgIF9Ub2FzdC5jbGVhcih7CiAgICAgICAgICAgIGNsZWFyQWxsOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKCiAgICB2YXIgcGxheWluZyA9IGZ1bmN0aW9uIHBsYXlpbmcoZSkgewogICAgICBpZiAoc3RvcmUuc3RhdGUuaXNwbGF5ID09PSBmYWxzZSkgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdzZXRpc3BsYXknKTsKICAgICAgfQogICAgfTsKICAgIC8qKiBAd2FpdGluZwogICAgICogQGV4YW1wbGUg57yT5Yay54q25oCBCiAgICAgKi8KCgogICAgdmFyIHdhaXRpbmcgPSBmdW5jdGlvbiB3YWl0aW5nKCkgewogICAgICBfVG9hc3QubG9hZGluZyh7CiAgICAgICAgbWVzc2FnZTogJ+WKoOi9veS4rS4uLicsCiAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgbG9hZGluZ1R5cGU6ICdzcGlubmVyJwogICAgICB9KTsKICAgIH07CiAgICAvKioKICAgICAqIEBldmVudCB75LqL5Lu25a+56LGhfQogICAgICovCgoKICAgIHZhciBsb2FkZWRtZXRhZGF0YSA9IGZ1bmN0aW9uIGxvYWRlZG1ldGFkYXRhKGUpIHsKICAgICAgZHVyYXRpb24udmFsdWUgPSBlLnRhcmdldC5kdXJhdGlvbjsKICAgIH07CgogICAgdmFyIGVycm9yID0gZnVuY3Rpb24gZXJyb3IoKSB7CiAgICAgIGlmIChzdG9yZS5zdGF0ZS5zb25nbGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIF9Ub2FzdC5mYWlsKCfmraTmrYzmm7LmmoLkuI3og73mkq3mlL4nKTsKCiAgICAgIHN0b3JlLmRpc3BhdGNoKCdzZXRpc3BsYXknKTsKICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHN0b3JlLnN0YXRlLmF1ZGlvLnBhdXNlKCk7CiAgICAgIH0pOwogICAgICBzdG9yZS5kaXNwYXRjaCgnc2V0c2V0Y3VycmV0Jywgc3RvcmUuc3RhdGUuY3VycmV0ICsgMSk7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdzZXRpc3BsYXknKTsKICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHN0b3JlLnN0YXRlLmF1ZGlvLnBsYXkoKTsKICAgICAgfSk7CiAgICB9OwoKICAgIHdhdGNoRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ3NldGF1ZGlvJywgYXVkaW8pOwogICAgfSk7CgogICAgdmFyIG9uVGltZXVwZGF0ZSA9IGZ1bmN0aW9uIG9uVGltZXVwZGF0ZShlKSB7CiAgICAgIGN1cnJlbnRUaW1lLnZhbHVlID0gZS50YXJnZXQuY3VycmVudFRpbWUudG9GaXhlZCgyKTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgcGxheTogcGxheSwKICAgICAgb25UaW1ldXBkYXRlOiBvblRpbWV1cGRhdGUsCiAgICAgIGF1ZGlvOiBhdWRpbywKICAgICAgdXNlU3RvcmU6IHVzZVN0b3JlLAogICAgICBlbmRlZDogZW5kZWQsCiAgICAgIHJhbmRvbTogcmFuZG9tLAogICAgICBzdG9yZTogc3RvcmUsCiAgICAgIGVycm9yOiBlcnJvciwKICAgICAgY3VycmVudFRpbWU6IGN1cnJlbnRUaW1lLAogICAgICBzaG93OiBzaG93LAogICAgICBzaG93UG9wdXA6IHNob3dQb3B1cCwKICAgICAgY2hhbmdlc2hvdzogY2hhbmdlc2hvdywKICAgICAgcGxheWluZzogcGxheWluZywKICAgICAgd2FpdGluZzogd2FpdGluZywKICAgICAgbG9hZGVkbWV0YWRhdGE6IGxvYWRlZG1ldGFkYXRhLAogICAgICBkdXJhdGlvbjogZHVyYXRpb24sCiAgICAgIHBsYXlsaXN0OiBwbGF5bGlzdCwKICAgICAgY2FucGxheTogY2FucGxheSwKICAgICAgcGxheXN0YXRlOiBwbGF5c3RhdGUKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["D:\\HTML工程\\项目\\v3netease-main\\src\\components\\audio\\index.vue"],"names":[],"mappings":"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","sourcesContent":["<script>\nimport Info from './info.vue';\nimport { ref, watchEffect, nextTick } from 'vue';\nimport { useStore } from 'vuex';\nimport { Toast } from 'vant';\nimport Playlist from '../playlist/';\nimport { random } from '@/Util/fltter.js';\nimport { show } from '@/hooks/status.js';\nexport default {\n  name: 'Audio',\n  components: {\n    Info,\n    Playlist,\n  },\n  setup(props, { emit }) {\n    const audio = ref(null);\n    let currentTime = ref(0); //当前播放时间\n    let duration = ref(0); //当前歌曲长度\n    const store = useStore();\n    const playlist = ref(false);\n    const showPopup = () => {\n      if (store.state.songlist.length) {\n        show.value = true;\n      }\n    };\n    const playstate = () => {\n      playlist.value = !playlist.value;\n    };\n    /**\n     * @param {Boolean} 接收布尔值改变父级弹出层状态\n     */\n    const changeshow = (val) => {\n      show.value = val;\n    };\n    const canplay = () => {\n      Toast.clear();\n    };\n\n    const play = () => {\n      store.dispatch('setisplay');\n      if (store.state.isplay && store.state.audio.readyState == 4) {\n        store.state.audio.play();\n      } else {\n        store.state.audio.pause();\n      }\n    };\n    const ended = () => {\n      nextTick(() => {\n        store.dispatch('setisplay');\n        store.state.audio.pause();\n      });\n      if (store.state.songlist.length < store.state.curret + 2) {\n        Toast.fail('没有下一首咯');\n        return;\n      }\n      Toast.loading({\n        message: '加载中...',\n        forbidClick: true,\n        loadingType: 'spinner',\n      });\n      if (store.state.playmodel === 0) {\n        store.commit('setcurret', store.state.curret + 1);\n      } else if (store.state.playmodel === 1) {\n        console.log(random(0, store.state.songlist.length - 1));\n        store.commit('setcurret', random(0, store.state.songlist.length - 1));\n      } else {\n        store.commit('setcurret', store.state.curret);\n      }\n      nextTick(() => {\n        store.state.audio.play();\n        if (store.state.audio.played) {\n          store.dispatch('setisplay');\n          Toast.clear({\n            clearAll: true,\n          });\n        }\n      });\n    };\n    const playing = (e) => {\n      if (store.state.isplay === false) {\n        store.dispatch('setisplay');\n      }\n    };\n    /** @waiting\n     * @example 缓冲状态\n     */\n    const waiting = () => {\n      Toast.loading({\n        message: '加载中...',\n        forbidClick: true,\n        loadingType: 'spinner',\n      });\n    };\n    /**\n     * @event {事件对象}\n     */\n    const loadedmetadata = (e) => {\n      duration.value = e.target.duration;\n    };\n\n    const error = () => {\n      if (store.state.songlist.length === 0) {\n        return;\n      }\n      Toast.fail('此歌曲暂不能播放');\n      store.dispatch('setisplay');\n      nextTick(() => {\n        store.state.audio.pause();\n      });\n      store.dispatch('setsetcurret', store.state.curret + 1);\n      store.dispatch('setisplay');\n      nextTick(() => {\n        store.state.audio.play();\n      });\n    };\n    watchEffect(() => {\n      store.dispatch('setaudio', audio);\n    });\n    const onTimeupdate = (e) => {\n      currentTime.value = e.target.currentTime.toFixed(2);\n    };\n\n    return {\n      play,\n      onTimeupdate,\n      audio,\n      useStore,\n      ended,\n      random,\n      store,\n      error,\n      currentTime,\n      show,\n      showPopup,\n      changeshow,\n      playing,\n      waiting,\n      loadedmetadata,\n      duration,\n      playlist,\n      canplay,\n      playstate,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\">\n.audio {\n  transition: bottom 0.8s;\n  z-index: 100;\n  border-radius: 15px;\n  width: 100%;\n  height: 6vh;\n  background-color: #f6f7f8;\n  position: fixed;\n  left: 0;\n  right: 0;\n\n  .controls {\n    display: flex;\n    width: 95vw;\n    margin: 0 auto;\n    .left,\n    .right {\n      display: flex;\n      align-items: center;\n      .songname {\n        margin-left: 10px;\n        width: 190px;\n      }\n      & i {\n        margin-left: 30px;\n      }\n    }\n  }\n  .slide-fade-enter-active {\n    transition: all 0.3s ease-out;\n  }\n\n  .slide-fade-leave-active {\n    transition: all 0.8s cubic-bezier(1, 0.5, 0.8, 1);\n  }\n\n  .slide-fade-enter-from,\n  .slide-fade-leave-to {\n    transform: translateX(20px);\n    opacity: 0;\n  }\n  .rotateimg {\n    animation-name: Rotate;\n    animation-iteration-count: infinite;\n    animation-play-state: paused;\n    animation-timing-function: linear;\n    animation-duration: 5s;\n  }\n  .active {\n    animation-play-state: running;\n  }\n  @keyframes Rotate {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n}\n</style>\n\n<template>\n  <div class=\"audio\" @click=\"showPopup\">\n    <audio\n      ref=\"audio\"\n      @timeupdate=\"onTimeupdate\"\n      @error=\"error\"\n      :src=\"\n        useStore().state.songlist.length !== 0\n          ? `https://music.163.com/song/media/outer/url?id=${store.state.songlist[store.state.curret].id}.mp3`\n          : ''\n      \"\n      @playing=\"playing\"\n      @ended=\"ended\"\n      @waiting=\"waiting\"\n      @loadedmetadata=\"loadedmetadata\"\n      @canplay=\"canplay\"\n    ></audio>\n    <div class=\"controls\">\n      <div class=\"left\">\n        <van-image\n          width=\"6vh\"\n          height=\"6vh\"\n          round\n          fit=\"cover\"\n          class=\"rotateimg\"\n          :class=\"store.state.isplay && store.state.audio.played && store.state.audio.readyState === 4 ? 'active' : ''\"\n          :src=\"\n            useStore().state.songlist.length !== 0\n              ? useStore().state.songlist[useStore().state.curret].al.picUrl\n              : 'http://p3.music.126.net/tBTNafgjNnTL1KlZMt7lVA==/18885211718935735.jpg'\n          \"\n        >\n          <template v-slot:loading> <van-loading type=\"spinner\" size=\"10\" color=\"#000\" /> </template\n        ></van-image>\n\n        <span class=\"songname van-ellipsis\"\n          >{{\n            useStore().state.songlist.length !== 0\n              ? `${store.state.songlist[store.state.curret].name}-${\n                  store.state.songlist[store.state.curret].ar[0].name\n                }`\n              : '网易云音乐'\n          }}\n        </span>\n      </div>\n      <div class=\"right\">\n        <van-icon\n          :name=\"useStore().state.isplay ? 'pause-circle-o' : 'play-circle-o'\"\n          size=\"28\"\n          @click.stop=\"play\"\n        /><van-icon name=\"bars\" size=\"28\" @click.stop=\"playlist = !playlist\" />\n      </div>\n    </div>\n    <van-popup v-model:show=\"show\" position=\"bottom\" :style=\"{ height: '100%' }\" teleport=\"body\">\n      <Info\n        :show=\"show\"\n        @changeshow=\"changeshow\"\n        :currentTime=\"currentTime\"\n        :duration=\"duration\"\n        :play=\"play\"\n        v-model=\"currentTime\"\n        @playstate=\"playstate\"\n    /></van-popup>\n    <van-popup\n      v-model:show=\"playlist\"\n      position=\"bottom\"\n      :style=\"{ height: '70%', width: '95%', margin: '0 0 0 10px' }\"\n      teleport=\"body\"\n      round\n    >\n      <Playlist\n    /></van-popup>\n  </div>\n</template>\n"],"sourceRoot":""}]}