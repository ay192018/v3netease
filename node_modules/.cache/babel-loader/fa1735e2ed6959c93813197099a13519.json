{"remainingRequest":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\index.vue?vue&type=template&id=a0fd5576&scoped=true","dependencies":[{"path":"D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\index.vue","mtime":1648304773402},{"path":"D:\\HTML工程\\项目\\v3netease-main\\babel.config.js","mtime":1648433846758},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1646661867650},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1646661868754},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1646661868754}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgeyByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCByZXNvbHZlRHluYW1pY0NvbXBvbmVudCBhcyBfcmVzb2x2ZUR5bmFtaWNDb21wb25lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIEtlZXBBbGl2ZSBhcyBfS2VlcEFsaXZlLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2ssIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhTY29wZUlkID0gZnVuY3Rpb24gX3dpdGhTY29wZUlkKG4pIHsKICByZXR1cm4gX3B1c2hTY29wZUlkKCJkYXRhLXYtYTBmZDU1NzYiKSwgbiA9IG4oKSwgX3BvcFNjb3BlSWQoKSwgbjsKfTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAic2VhcmNoIgp9Owp2YXIgX2hvaXN0ZWRfMiA9IHsKICBhY3Rpb246ICIvIgp9OwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X3Zhbl9zZWFyY2ggPSBfcmVzb2x2ZUNvbXBvbmVudCgidmFuLXNlYXJjaCIpOwoKICB2YXIgX2NvbXBvbmVudF9BZHZpY2UgPSBfcmVzb2x2ZUNvbXBvbmVudCgiQWR2aWNlIik7CgogIHZhciBfY29tcG9uZW50X0hpc3RvcnkgPSBfcmVzb2x2ZUNvbXBvbmVudCgiSGlzdG9yeSIpOwoKICB2YXIgX2NvbXBvbmVudF9Ib3RzZWFyY2ggPSBfcmVzb2x2ZUNvbXBvbmVudCgiSG90c2VhcmNoIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJmb3JtIiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X3Zhbl9zZWFyY2gsIHsKICAgIG1vZGVsVmFsdWU6ICRzZXR1cC52YWx1ZSwKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogW19jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJHNldHVwLnZhbHVlID0gJGV2ZW50OwogICAgfSksICRzZXR1cC52YWx1ZXNdLAogICAgInNob3ctYWN0aW9uIjogJHNldHVwLnZhbHVlID8gZmFsc2UgOiB0cnVlLAogICAgcGxhY2Vob2xkZXI6ICRzZXR1cC5wbGFjZWhvbGRlciwKICAgIG9uU2VhcmNoOiAkc2V0dXAub25TZWFyY2gsCiAgICBzaGFwZTogInJvdW5kIiwKICAgIG9uQ2FuY2VsOiAkc2V0dXAub25DYW5jZWwsCiAgICBvbkZvY3VzOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRzZXR1cC5pc3Jlc3VsdHNob3cgPSBmYWxzZTsKICAgIH0pCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm1vZGVsVmFsdWUiLCAic2hvdy1hY3Rpb24iLCAicGxhY2Vob2xkZXIiLCAib25VcGRhdGU6bW9kZWxWYWx1ZSIsICJvblNlYXJjaCIsICJvbkNhbmNlbCJdKV0pLCAkc2V0dXAuaXNyZXN1bHRzaG93ID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9LZWVwQWxpdmUsIHsKICAgIGtleTogMCwKICAgIHZhbHVlOiAkc2V0dXAudmFsdWUKICB9LCBbKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9yZXNvbHZlRHluYW1pY0NvbXBvbmVudCgiUmVzdWx0cyIpKSldLCAxMDMyCiAgLyogUFJPUFMsIERZTkFNSUNfU0xPVFMgKi8KICAsIFsidmFsdWUiXSkpIDogJHNldHVwLnZhbHVlID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfQWR2aWNlLCB7CiAgICBrZXk6IDEsCiAgICBzdWdnZXN0bGlzdDogJHNldHVwLnN1Z2dlc3RsaXN0LAogICAgb25TZWFyY2g6ICRzZXR1cC5vblNlYXJjaAogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJzdWdnZXN0bGlzdCIsICJvblNlYXJjaCJdKSkgOiAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9IaXN0b3J5LCB7CiAgICBrZXk6IDIsCiAgICBoaXN0b3J5bGlzdDogJHNldHVwLmhpc3RvcnlsaXN0LAogICAgb25SZXNldDogJHNldHVwLnJlc2V0LAogICAgb25TZWFyY2g6ICRzZXR1cC5vblNlYXJjaAogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJoaXN0b3J5bGlzdCIsICJvblJlc2V0IiwgIm9uU2VhcmNoIl0pKSwgJHNldHVwLmlzcmVzdWx0c2hvdyA9PT0gZmFsc2UgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9Ib3RzZWFyY2gsIHsKICAgIGtleTogMywKICAgIG9uU2VhcmNoOiAkc2V0dXAub25TZWFyY2gsCiAgICBob3RzZWFyY2g6ICRzZXR1cC5ob3RzZWFyY2gKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsib25TZWFyY2giLCAiaG90c2VhcmNoIl0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoInYtaWYiLCB0cnVlKV0pOwp9"},{"version":3,"sources":["D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\index.vue"],"names":[],"mappings":";;;;;;;;;AA0FO,EAAA,KAAK,EAAC;;;AACH,EAAA,MAAM,EAAC;;;;;;;;;;;uBADf,mBAAA,CAoBM,KApBN,EAAA,UAAA,EAoBM,CAnBJ,mBAAA,CAWO,MAXP,EAAA,UAAA,EAWO,CAVL,YAAA,CASE,qBATF,EASE;gBARS,MAAA,CAAA,KAQT;;aARS,MAAA,CAAA,K,GAAK,M;QAGO,MAAA,CAAA,M,CAKrB;AAPC,mBAAa,MAAA,CAAA,KAAA,GAAK,KAAL,GAAK,IAOnB;AANC,IAAA,WAAW,EAAE,MAAA,CAAA,WAMd;AAJC,IAAA,QAAM,EAAE,MAAA,CAAA,QAIT;AAHA,IAAA,KAAK,EAAC,OAGN;AAFC,IAAA,QAAM,EAAE,MAAA,CAAA,QAET;AADC,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,MAAA,CAAA,YAAA,GAAY,KAAd;AAAA,KAAA;AACN,GATF,E,IAAA,E;;AAAA,I,2FAAA,CAUK,CAXP,CAmBI,EAPc,MAAA,CAAA,Y,kBAAlB,YAAA,CAEa,UAFb,EAEa;UAAA;AAFoB,IAAA,KAAK,EAAE,MAAA,CAAA;AAE3B,GAFb,E,gBACE,YAAA,CAAqC,wBAAA,CAAA,SAAA,CAArC,C,EADF,E;;AAAA,I,SAAA,C,IAImB,MAAA,CAAA,K,kBAAnB,YAAA,CAA4E,iBAA5E,EAA4E;UAAA;AAAjD,IAAA,WAAW,EAAE,MAAA,CAAA,WAAoC;AAAtB,IAAA,QAAQ,EAAE,MAAA,CAAA;AAAY,GAA5E,E,IAAA,E;;AAAA,I,2BAAA,C,mBACA,YAAA,CAAiF,kBAAjF,EAAiF;UAAA;AAAhE,IAAA,WAAW,EAAE,MAAA,CAAA,WAAmD;AAArC,IAAA,OAAK,EAAE,MAAA,CAAA,KAA8B;AAAtB,IAAA,QAAQ,EAAE,MAAA,CAAA;AAAY,GAAjF,E,IAAA,E;;AAAA,I,sCAAA,C,CAEI,EADyD,MAAA,CAAA,YAAA,KAAY,K,kBAAzE,YAAA,CAAuF,oBAAvF,EAAuF;UAAA;AAA3E,IAAA,QAAQ,EAAE,MAAA,CAAA,QAAiE;AAAtD,IAAA,SAAS,EAAE,MAAA,CAAA;AAA2C,GAAvF,E,IAAA,E;;AAAA,I,yBAAA,C,qCACI,CApBN,C","sourcesContent":["<script>\nimport { debounce } from '@/Util/fltter.js';\nimport Hotsearch from './hotsearch.vue';\nimport { ref, reactive, onMounted, onActivated, onDeactivated } from 'vue';\nimport History from './history.vue';\nimport Advice from './advice.vue';\nimport Results from './results.vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { getcloudsearch, getsearchdefault, gethotsearch, getsuggest } from '@/api/search.js';\nexport default {\n  index: 'index',\n  components: {\n    History,\n    Results,\n    Advice,\n    Hotsearch,\n  },\n  setup(props, { expose }) {\n    const value = ref('');\n    const placeholder = ref('');\n    const route = useRoute();\n    const isresultshow = ref(false); //搜索结果的显示状态\n    const router = useRouter();\n    const historylist = ref([]); //历史搜索列表\n    const hotsearch = ref([]); //热搜列表\n    const suggestlist = ref([]);\n\n    onMounted(async () => {\n      const { data } = await getsearchdefault();\n      const res = await gethotsearch();\n      hotsearch.value = res.data.data;\n      placeholder.value = data.data.showKeyword;\n    });\n\n    const onSearch = async (val) => {\n      value.value = val;\n      if (val === '') {\n        value.value = placeholder.value;\n      }\n      /**\n       * @params 判断每次追加的元素在原来的数组中是否有，如果有直接删除有的那个元素在追加到首位\n       */\n      // console.log(historylist.value.indexOf(value.value));\n      if (historylist.value.lastIndexOf(value.value) !== -1) {\n        historylist.value.splice(historylist.value.lastIndexOf(value.value), 1);\n      }\n      historylist.value.unshift(value.value);\n      localStorage.setItem('historylist', JSON.stringify(historylist.value));\n      isresultshow.value = true;\n    };\n    const reset = () => {\n      historylist.value = [];\n    };\n\n    const values = async (val) => {\n      if (val.length === 0) return;\n      const { data } = await getsuggest({\n        type: 'mobile',\n        keywords: val,\n      });\n      suggestlist.value = data.result.allMatch;\n    };\n\n    const onCancel = () => {\n      router.back();\n    };\n    return {\n      value,\n      router,\n      onSearch,\n      reset,\n      onCancel,\n      historylist,\n      isresultshow,\n      placeholder,\n      values,\n      suggestlist,\n      hotsearch,\n      debounce,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.search {\n}\n</style>\n\n<template>\n  <div class=\"search\">\n    <form action=\"/\">\n      <van-search\n        v-model=\"value\"\n        :show-action=\"value ? false : true\"\n        :placeholder=\"placeholder\"\n        @update:model-value=\"values\"\n        @search=\"onSearch\"\n        shape=\"round\"\n        @cancel=\"onCancel\"\n        @focus=\"isresultshow = false\"\n      />\n    </form>\n    <keep-alive v-if=\"isresultshow\" :value=\"value\">\n      <component is=\"Results\"> </component>\n    </keep-alive>\n\n    <Advice v-else-if=\"value\" :suggestlist=\"suggestlist\" :onSearch=\"onSearch\" />\n    <History v-else :historylist=\"historylist\" @reset=\"reset\" :onSearch=\"onSearch\" />\n    <Hotsearch :onSearch=\"onSearch\" :hotsearch=\"hotsearch\" v-if=\"isresultshow === false\" />\n  </div>\n</template>\n"],"sourceRoot":""}]}