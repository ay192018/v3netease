{"remainingRequest":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\thread-loader\\dist\\cjs.js!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\babel-loader\\lib\\index.js!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\HTML工程\\项目\\v3netease-main\\src\\components\\video\\index.vue?vue&type=template&id=d7c9a150&scoped=true","dependencies":[{"path":"D:\\HTML工程\\项目\\v3netease-main\\src\\components\\video\\index.vue","mtime":1644136813582},{"path":"D:\\HTML工程\\项目\\v3netease-main\\babel.config.js","mtime":1643989866000},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636397451353},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1636397451359},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1636614324825},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1643212638233},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636397451353},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1643212638233}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBjcmVhdGVFbGVtZW50Vk5vZGUgYXMgX2NyZWF0ZUVsZW1lbnRWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoU2NvcGVJZCA9IGZ1bmN0aW9uIF93aXRoU2NvcGVJZChuKSB7CiAgcmV0dXJuIF9wdXNoU2NvcGVJZCgiZGF0YS12LWQ3YzlhMTUwIiksIG4gPSBuKCksIF9wb3BTY29wZUlkKCksIG47Cn07Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogInZpZGVvIgp9Owp2YXIgX2hvaXN0ZWRfMiA9IFsic3JjIl07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfdmFuX2ljb24gPSBfcmVzb2x2ZUNvbXBvbmVudCgidmFuLWljb24iKTsKCiAgdmFyIF9jb21wb25lbnRfdmFuX25hdl9iYXIgPSBfcmVzb2x2ZUNvbXBvbmVudCgidmFuLW5hdi1iYXIiKTsKCiAgdmFyIF9jb21wb25lbnRfVnVlRGFubWFrdSA9IF9yZXNvbHZlQ29tcG9uZW50KCJWdWVEYW5tYWt1Iik7CgogIHZhciBfY29tcG9uZW50X0RhdGEgPSBfcmVzb2x2ZUNvbXBvbmVudCgiRGF0YSIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfdmFuX25hdl9iYXIsIHsKICAgIGJvcmRlcjogZmFsc2UsCiAgICBvbkNsaWNrTGVmdDogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkc2V0dXAucm91dGVyLmJhY2soKTsKICAgIH0pCiAgfSwgewogICAgbGVmdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X3Zhbl9pY29uLCB7CiAgICAgICAgbmFtZTogImFycm93LWxlZnQiLAogICAgICAgIGNvbG9yOiAiI2ZmZiIsCiAgICAgICAgc2l6ZTogIjI0IgogICAgICB9KV07CiAgICB9KSwKICAgIF86IDEKICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfVnVlRGFubWFrdSwgewogICAgZGFubXVzOiAkc2V0dXAuZGFubXVzLAogICAgcmVmOiAiZGFubWFrdSIsCiAgICBhdXRvcGxheTogIiIsCiAgICBsb29wOiB0cnVlLAogICAgY2xhc3M6ICJEYW5tYWt1IiwKICAgIHJpZ2h0OiA0LAogICAgc3BlZWRzOiAxMDAsCiAgICBkZWJvdW5jZTogMTAwMAogIH0sIG51bGwsIDgsIFsiZGFubXVzIl0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJ2aWRlbyIsIHsKICAgIHNyYzogJHNldHVwLnVybCwKICAgIGNsYXNzOiAiY29udHJvbHMiLAogICAgcmVmOiAidmlkZW8iLAogICAgYXV0b3BsYXk6ICIiLAogICAgb25DbGljazogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkc2V0dXAucGxheXN0YXR1cyAmJiAkc2V0dXAucGxheXN0YXR1cy5hcHBseSgkc2V0dXAsIGFyZ3VtZW50cyk7CiAgICB9KQogIH0sIG51bGwsIDgsIF9ob2lzdGVkXzIpLCAkc2V0dXAuaWNvbiA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X3Zhbl9pY29uLCB7CiAgICBrZXk6IDAsCiAgICBuYW1lOiAicGxheSIsCiAgICBvbkNsaWNrOiAkc2V0dXAucGxheSwKICAgIGNvbG9yOiAiI2ZmZiIsCiAgICBzaXplOiAiNTAiLAogICAgY2xhc3M6ICJwbGF5IgogIH0sIG51bGwsIDgsIFsib25DbGljayJdKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCIiLCB0cnVlKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfRGF0YSwgewogICAgZGF0YTogJHNldHVwLmRhdGFzCiAgfSwgbnVsbCwgOCwgWyJkYXRhIl0pXSk7Cn0="},{"version":3,"sources":["D:\\HTML工程\\项目\\v3netease-main\\src\\components\\video\\index.vue"],"names":[],"mappings":";;;;;;;AACO,EAAA,KAAK,EAAC;;;;;;;;;;;;uBAAX,mBAAA,CAiCM,KAjCN,EAAA,UAAA,EAiCM,CAhCJ,YAAA,CAGe,sBAHf,EAGe;AAHD,IAAA,MAAM,EAAE,KAGP;AAHe,IAAA,WAAU,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,MAAA,CAAA,MAAA,CAAO,IAAP,EAAF;AAAA,KAAA;AAGzB,GAHf,E;AACa,IAAA,IAAI,EAAA,QAAA,CACZ;AAAA,aAAqD,CAArD,YAAA,CAAqD,mBAArD,EAAqD;AAA3C,QAAA,IAAI,EAAC,YAAsC;AAAzB,QAAA,KAAK,EAAC,MAAmB;AAAZ,QAAA,IAAI,EAAC;AAAO,OAArD,CAAqD,CAArD;AAAA,KADY,C;;GADjB,CAgCI,EA3BJ,YAAA,CASE,qBATF,EASE;AARC,IAAA,MAAM,EAAE,MAAA,CAAA,MAQT;AAPA,IAAA,GAAG,EAAC,SAOJ;AANA,IAAA,QAAQ,EAAR,EAMA;AALC,IAAA,IAAI,EAAE,IAKP;AAJA,IAAA,KAAK,EAAC,SAIN;AAHC,IAAA,KAAK,EAAE,CAGR;AAFC,IAAA,MAAM,EAAE,GAET;AADC,IAAA,QAAQ,EAAE;AACX,GATF,E,IAAA,E,CAAA,E,UAAA,CA2BI,EAhBJ,mBAAA,CAME,OANF,EAME;AALC,IAAA,GAAG,EAAE,MAAA,CAAA,GAKN;AAJA,IAAA,KAAK,EAAC,UAIN;AAHA,IAAA,GAAG,EAAC,OAGJ;AAFA,IAAA,QAAQ,EAAR,EAEA;AADC,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,UAAA,IAAA,MAAA,CAAA,UAAA,OAAA,MAAA,YAAF;AAAA,KAAA;AACN,GANF,E,IAAA,E,CAAA,E,UAAA,CAgBI,EAHI,MAAA,CAAA,I,kBANR,YAAA,CAOE,mBAPF,EAOE;UAAA;AANA,IAAA,IAAI,EAAC,MAML;AALC,IAAA,OAAK,EAAE,MAAA,CAAA,IAKR;AAJA,IAAA,KAAK,EAAC,MAIN;AAHA,IAAA,IAAI,EAAC,IAGL;AAFA,IAAA,KAAK,EAAC;AAEN,GAPF,E,IAAA,E,CAAA,E,WAAA,C,iCASI,EADJ,YAAA,CAAsB,eAAtB,EAAsB;AAAf,IAAA,IAAI,EAAE,MAAA,CAAA;AAAS,GAAtB,EAAkB,IAAlB,EAAkB,CAAlB,EAAkB,CAAA,MAAA,CAAlB,CACI,CAjCN,C","sourcesContent":["<template>\r\n  <div class=\"video\">\r\n    <van-nav-bar :border=\"false\" @click-left=\"router.back()\">\r\n      <template #left\r\n        ><van-icon name=\"arrow-left\" color=\"#fff\" size=\"24\" /> </template\r\n    ></van-nav-bar>\r\n\r\n    <VueDanmaku\r\n      :danmus=\"danmus\"\r\n      ref=\"danmaku\"\r\n      autoplay\r\n      :loop=\"true\"\r\n      class=\"Danmaku\"\r\n      :right=\"4\"\r\n      :speeds=\"100\"\r\n      :debounce=\"1000\"\r\n    />\r\n\r\n    <video\r\n      :src=\"url\"\r\n      class=\"controls\"\r\n      ref=\"video\"\r\n      autoplay\r\n      @click=\"playstatus\"\r\n    />\r\n    <van-icon\r\n      name=\"play\"\r\n      @click=\"play\"\r\n      color=\"#fff\"\r\n      size=\"50\"\r\n      class=\"play\"\r\n      v-if=\"icon\"\r\n    />\r\n    <Data :data=\"datas\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getvideodetail, getvideourl, getvideocomment } from \"@/api/video.js\";\r\nimport { nextTick, onMounted } from \"@vue/runtime-core\";\r\nimport { useRouter } from \"vue-router\";\r\nimport VueDanmaku from \"vue3-danmaku\";\r\nimport { ref, reactive } from \"vue\";\r\nimport Data from \"./components/data.vue\";\r\nexport default {\r\n  components: { VueDanmaku, Data },\r\n  setup(props, { attrs }) {\r\n    const datas = reactive({\r\n      data: {},\r\n      creator: {},\r\n    });\r\n    const url = ref(\"\");\r\n    const video = ref(null);\r\n    const danmaku = ref(null);\r\n    const router = useRouter();\r\n    const icon = ref(false);\r\n    const danmus = ref([]);\r\n    // console.log(\r\n    //   nextTick(() => {\r\n    //     console.log([video.value]);\r\n    //   })\r\n    // );\r\n    const playstatus = () => {\r\n      //播放状态\r\n      if (video.value.paused) {\r\n        nextTick(() => {\r\n          video.value.play();\r\n          icon.value = !icon.value;\r\n        });\r\n      } else {\r\n        nextTick(() => {\r\n          video.value.pause();\r\n          icon.value = !icon.value;\r\n        });\r\n      }\r\n    };\r\n    const play = () => {\r\n      nextTick(() => {\r\n        video.value.play();\r\n      });\r\n      icon.value = !icon.value;\r\n    };\r\n    onMounted(async () => {\r\n      const { data } = await getvideodetail({\r\n        //视频详情\r\n        id: attrs.id,\r\n      });\r\n      const res = await getvideourl({\r\n        //视频地址\r\n        id: attrs.id,\r\n      });\r\n      const comment = await getvideocomment({\r\n        //视频评论弹幕\r\n        id: attrs.id,\r\n        limit: 100,\r\n      });\r\n\r\n      let arr = [];\r\n      comment.data.comments.forEach((item) => {\r\n        arr.push(item.content);\r\n      });\r\n      danmus.value = arr;\r\n\r\n      datas.data = data.data;\r\n      datas.creator = data.data.creator;\r\n      console.log(datas.data);\r\n      url.value = res.data.urls[0].url;\r\n    });\r\n    return {\r\n      datas,\r\n      url,\r\n      video,\r\n      router,\r\n      danmus,\r\n      danmaku,\r\n      playstatus,\r\n      icon,\r\n      play,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.video {\r\n  background: #000;\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  z-index: 3000;\r\n  width: 100%;\r\n  height: 100%;\r\n  .controls {\r\n    z-index: -1;\r\n    width: 100%;\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    top: 50%;\r\n    transform: translateY(-70%);\r\n  }\r\n  /deep/ .van-nav-bar {\r\n    background: transparent;\r\n  }\r\n  .Danmaku {\r\n    width: 100%;\r\n    height: 20vh;\r\n    position: fixed;\r\n    left: 0;\r\n    top: 10vh;\r\n    right: 0;\r\n  }\r\n  .play {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -150%);\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}