{"remainingRequest":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\thread-loader\\dist\\cjs.js!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\babel-loader\\lib\\index.js!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\HTML工程\\项目\\v3netease-main\\src\\views\\my\\login.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\HTML工程\\项目\\v3netease-main\\src\\views\\my\\login.vue","mtime":1643989866000},{"path":"D:\\HTML工程\\项目\\v3netease-main\\babel.config.js","mtime":1643989866000},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636397451353},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1636397451359},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1636614324825},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636397451353},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1643212638233}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxIVE1MXHU1REU1XHU3QTBCXFxcdTk4NzlcdTc2RUVcXHYzbmV0ZWFzZS1tYWluXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCB7IHJlZiB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IGdldGxvZ2luIH0gZnJvbSAiQC9hcGkvdXNlci5qcyI7CmltcG9ydCB7IFRvYXN0IH0gZnJvbSAidmFudCI7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gInZ1ZS1yb3V0ZXIiOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHBob25lID0gcmVmKCIiKTsKICAgIHZhciBwYXNzd29yZCA9IHJlZigiIik7CiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CgogICAgdmFyIG9uQ2xpY2tMZWZ0ID0gZnVuY3Rpb24gb25DbGlja0xlZnQoKSB7CiAgICAgIGhpc3RvcnkuYmFjaygpOwogICAgfTsKCiAgICB2YXIgb25TdWJtaXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3lpZWxkJGdldGxvZ2luLCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBUb2FzdC5sb2FkaW5nKHsKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuWKoOi9veS4rS4uLiIsCiAgICAgICAgICAgICAgICAgIGZvcmJpZENsaWNrOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldGxvZ2luKHsKICAgICAgICAgICAgICAgICAgcGhvbmU6IHBob25lLnZhbHVlLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQudmFsdWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfeWllbGQkZ2V0bG9naW4gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRnZXRsb2dpbi5kYXRhOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJjb29raWUiLCBKU09OLnN0cmluZ2lmeShkYXRhLmNvb2tpZSkpOwogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicHJvZmlsZSIsIEpTT04uc3RyaW5naWZ5KGRhdGEucHJvZmlsZSkpOwogICAgICAgICAgICAgICAgICBUb2FzdC5jbGVhcigpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIFRvYXN0LnN1Y2Nlc3MoIueZu+W9leaIkOWKnyIpOwogICAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBwYXRoOiAiLyIsCiAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IGRhdGEucHJvZmlsZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICByZXR1cm4gewogICAgICByb3V0ZXI6IHJvdXRlciwKICAgICAgcGhvbmU6IHBob25lLAogICAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICAgIG9uQ2xpY2tMZWZ0OiBvbkNsaWNrTGVmdCwKICAgICAgb25TdWJtaXQ6IG9uU3VibWl0CiAgICB9OwogIH0KfTs="},{"version":3,"sources":["D:\\HTML工程\\项目\\v3netease-main\\src\\views\\my\\login.vue"],"names":[],"mappings":";;;AA2CA,SAAS,GAAT,QAAoB,KAApB;AACA,SAAS,QAAT,QAAyB,eAAzB;AACA,SAAS,KAAT,QAAsB,MAAtB;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,SAAS,QAAT,QAAyB,MAAzB;AACA,eAAe;AACb,EAAA,KADa,mBACL;AACN,QAAM,KAAI,GAAI,GAAG,CAAC,EAAD,CAAjB;AACA,QAAM,QAAO,GAAI,GAAG,CAAC,EAAD,CAApB;AACA,QAAM,MAAK,GAAI,SAAS,EAAxB;;AACA,QAAM,WAAU,GAAI,SAAd,WAAc,GAAM;AACxB,MAAA,OAAO,CAAC,IAAR;AACD,KAFD;;AAGA,QAAM,QAAO;AAAA,yEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AACf,gBAAA,KAAK,CAAC,OAAN,CAAc;AACZ,kBAAA,OAAO,EAAE,QADG;AAEZ,kBAAA,WAAW,EAAE;AAFD,iBAAd;AADe;AAAA,uBAKQ,QAAQ,CAAC;AAC9B,kBAAA,KAAK,EAAE,KAAK,CAAC,KADiB;AAE9B,kBAAA,QAAQ,EAAE,QAAQ,CAAC;AAFW,iBAAD,CALhB;;AAAA;AAAA;AAKP,gBAAA,IALO,mBAKP,IALO;AASf,gBAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;;AACA,oBAAI,IAAI,CAAC,IAAL,KAAc,GAAlB,EAAuB;AACrB,kBAAA,YAAY,CAAC,OAAb,CAAqB,QAArB,EAA+B,IAAI,CAAC,SAAL,CAAe,IAAI,CAAC,MAApB,CAA/B;AACA,kBAAA,YAAY,CAAC,OAAb,CAAqB,SAArB,EAAgC,IAAI,CAAC,SAAL,CAAe,IAAI,CAAC,OAApB,CAAhC;AACA,kBAAA,KAAK,CAAC,KAAN;AACF;;AACA,gBAAA,KAAK,CAAC,OAAN,CAAc,MAAd;AACA,gBAAA,MAAM,CAAC,IAAP,CAAY;AACV,kBAAA,IAAI,EAAE,GADI;AAEV,kBAAA,OAAO,EAAE,IAAI,CAAC;AAFJ,iBAAZ;;AAhBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAP,QAAO;AAAA;AAAA;AAAA,OAAb;;AAsBA,WAAO;AACL,MAAA,MAAM,EAAN,MADK;AAEL,MAAA,KAAK,EAAL,KAFK;AAGL,MAAA,QAAQ,EAAR,QAHK;AAIL,MAAA,WAAW,EAAX,WAJK;AAKL,MAAA,QAAQ,EAAR;AALK,KAAP;AAOD;AArCY,CAAf","sourcesContent":["<template>\n  <div class=\"login\">\n    <van-nav-bar title=\"登录\" @click-left=\"onClickLeft\" :border=\"false\">\n      <template #left>\n        <van-icon name=\"arrow-left\" color=\"#ccc\" size=\"25\" />\n      </template>\n    </van-nav-bar>\n    <van-form @submit=\"onSubmit\">\n      <van-cell-group inset>\n        <!-- 通过 pattern 进行正则校验 -->\n        <van-field\n          v-model=\"phone\"\n          name=\"phone\"\n          placeholder=\"请输入手机号\"\n          label=\"手机号\"\n          :rules=\"[{ pattern: /^1\\d{10}$/, message: '请输入11位手机号' }]\"\n        />\n\n        <van-field\n          v-model=\"password\"\n          name=\"password\"\n          label=\"密码\"\n          type=\"password\"\n          placeholder=\"请输入密码\"\n          :rules=\"[\n            {\n              pattern: /^.{8,20}/,\n              message: '请输入8-20位字符',\n            },\n          ]\"\n        />\n        <!-- 通过 validator 返回错误提示 -->\n      </van-cell-group>\n      <div style=\"margin: 16px\">\n        <van-button round block color=\"red\" native-type=\"submit\">\n          登录\n        </van-button>\n      </div>\n    </van-form>\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport { getlogin } from \"@/api/user.js\";\nimport { Toast } from \"vant\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\nexport default {\n  setup() {\n    const phone = ref(\"\");\n    const password = ref(\"\");\n    const router = useRouter();\n    const onClickLeft = () => {\n      history.back();\n    };\n    const onSubmit = async () => {\n      Toast.loading({\n        message: \"加载中...\",\n        forbidClick: true,\n      });\n      const { data } = await getlogin({\n        phone: phone.value,\n        password: password.value,\n      });\n      console.log(data);\n      if (data.code === 200) {\n        localStorage.setItem(\"cookie\", JSON.stringify(data.cookie));\n        localStorage.setItem(\"profile\", JSON.stringify(data.profile));\n        Toast.clear();\n      }\n      Toast.success(\"登录成功\");\n      router.push({\n        path: \"/\",\n        profile: data.profile,\n      });\n    };\n\n    return {\n      router,\n      phone,\n      password,\n      onClickLeft,\n      onSubmit,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.login {\n  position: absolute;\n  z-index: 9999;\n  /deep/ .van-nav-bar {\n    background: red;\n  }\n  /deep/ .van-form {\n    margin-top: 30px;\n  }\n  /deep/ .van-nav-bar__title {\n    color: #fff;\n  }\n}\n</style>\n"],"sourceRoot":""}]}