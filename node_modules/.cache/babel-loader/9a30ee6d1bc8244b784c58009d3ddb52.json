{"remainingRequest":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\thread-loader\\dist\\cjs.js!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\babel-loader\\lib\\index.js!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\index.vue?vue&type=template&id=002e8a58&scoped=true","dependencies":[{"path":"D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\index.vue","mtime":1643989866000},{"path":"D:\\HTML工程\\项目\\v3netease-main\\babel.config.js","mtime":1643989866000},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636397451353},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1636397451359},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1636614324825},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1643212638233},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636397451353},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1643212638233}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgeyByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2ssIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhTY29wZUlkID0gZnVuY3Rpb24gX3dpdGhTY29wZUlkKG4pIHsKICByZXR1cm4gX3B1c2hTY29wZUlkKCJkYXRhLXYtMDAyZThhNTgiKSwgbiA9IG4oKSwgX3BvcFNjb3BlSWQoKSwgbjsKfTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAic2VhcmNoIgp9Owp2YXIgX2hvaXN0ZWRfMiA9IHsKICBhY3Rpb246ICIvIgp9OwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X3Zhbl9zZWFyY2ggPSBfcmVzb2x2ZUNvbXBvbmVudCgidmFuLXNlYXJjaCIpOwoKICB2YXIgX2NvbXBvbmVudF9SZXN1bHRzID0gX3Jlc29sdmVDb21wb25lbnQoIlJlc3VsdHMiKTsKCiAgdmFyIF9jb21wb25lbnRfQWR2aWNlID0gX3Jlc29sdmVDb21wb25lbnQoIkFkdmljZSIpOwoKICB2YXIgX2NvbXBvbmVudF9IaXN0b3J5ID0gX3Jlc29sdmVDb21wb25lbnQoIkhpc3RvcnkiKTsKCiAgdmFyIF9jb21wb25lbnRfSG90c2VhcmNoID0gX3Jlc29sdmVDb21wb25lbnQoIkhvdHNlYXJjaCIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZm9ybSIsIF9ob2lzdGVkXzIsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF92YW5fc2VhcmNoLCB7CiAgICBtb2RlbFZhbHVlOiAkc2V0dXAudmFsdWUsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IFtfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRzZXR1cC52YWx1ZSA9ICRldmVudDsKICAgIH0pLCAkc2V0dXAudmFsdWVzXSwKICAgICJzaG93LWFjdGlvbiI6ICIiLAogICAgcGxhY2Vob2xkZXI6ICRzZXR1cC5wbGFjZWhvbGRlciwKICAgIG9uU2VhcmNoOiAkc2V0dXAub25TZWFyY2gsCiAgICBzaGFwZTogInJvdW5kIiwKICAgIG9uQ2FuY2VsOiAkc2V0dXAub25DYW5jZWwsCiAgICBvbkZvY3VzOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRzZXR1cC5pc3Jlc3VsdHNob3cgPSBmYWxzZTsKICAgIH0pCiAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIiwgInBsYWNlaG9sZGVyIiwgIm9uVXBkYXRlOm1vZGVsVmFsdWUiLCAib25TZWFyY2giLCAib25DYW5jZWwiXSldKSwgJHNldHVwLmlzcmVzdWx0c2hvdyA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X1Jlc3VsdHMsIHsKICAgIGtleTogMCwKICAgIHZhbHVlOiAkc2V0dXAudmFsdWUKICB9LCBudWxsLCA4LCBbInZhbHVlIl0pKSA6ICRzZXR1cC52YWx1ZSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X0FkdmljZSwgewogICAga2V5OiAxLAogICAgc3VnZ2VzdGxpc3Q6ICRzZXR1cC5zdWdnZXN0bGlzdCwKICAgIG9uU2VhcmNoOiAkc2V0dXAub25TZWFyY2gKICB9LCBudWxsLCA4LCBbInN1Z2dlc3RsaXN0IiwgIm9uU2VhcmNoIl0pKSA6IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X0hpc3RvcnksIHsKICAgIGtleTogMiwKICAgIGhpc3RvcnlsaXN0OiAkc2V0dXAuaGlzdG9yeWxpc3QsCiAgICBvblJlc2V0OiAkc2V0dXAucmVzZXQsCiAgICBvblNlYXJjaDogJHNldHVwLm9uU2VhcmNoCiAgfSwgbnVsbCwgOCwgWyJoaXN0b3J5bGlzdCIsICJvblJlc2V0IiwgIm9uU2VhcmNoIl0pKSwgJHNldHVwLmlzcmVzdWx0c2hvdyA9PT0gZmFsc2UgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9Ib3RzZWFyY2gsIHsKICAgIGtleTogMywKICAgIG9uU2VhcmNoOiAkc2V0dXAub25TZWFyY2gsCiAgICBob3RzZWFyY2g6ICRzZXR1cC5ob3RzZWFyY2gKICB9LCBudWxsLCA4LCBbIm9uU2VhcmNoIiwgImhvdHNlYXJjaCJdKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCIiLCB0cnVlKV0pOwp9"},{"version":3,"sources":["D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\index.vue"],"names":[],"mappings":";;;;;;;;;AACO,EAAA,KAAK,EAAC;;;AACH,EAAA,MAAM,EAAC;;;;;;;;;;;;;uBADf,mBAAA,CA2BM,KA3BN,EAAA,UAAA,EA2BM,CA1BJ,mBAAA,CAWO,MAXP,EAAA,UAAA,EAWO,CAVL,YAAA,CASE,qBATF,EASE;gBARS,MAAA,CAAA,KAQT;;aARS,MAAA,CAAA,K,GAAK,M;QAGO,MAAA,CAAA,M,CAKrB;AAPA,mBAAA,EAOA;AANC,IAAA,WAAW,EAAE,MAAA,CAAA,WAMd;AAJC,IAAA,QAAM,EAAE,MAAA,CAAA,QAIT;AAHA,IAAA,KAAK,EAAC,OAGN;AAFC,IAAA,QAAM,EAAE,MAAA,CAAA,QAET;AADC,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,MAAA,CAAA,YAAA,GAAY,KAAd;AAAA,KAAA;AACN,GATF,E,IAAA,E,CAAA,E,4EAAA,CAUK,CAXP,CA0BI,EAbW,MAAA,CAAA,Y,kBAAf,YAAA,CAA8C,kBAA9C,EAA8C;UAAA;AAAhB,IAAA,KAAK,EAAE,MAAA,CAAA;AAAS,GAA9C,E,IAAA,E,CAAA,E,SAAA,C,IACmB,MAAA,CAAA,K,kBAAnB,YAAA,CAA4E,iBAA5E,EAA4E;UAAA;AAAjD,IAAA,WAAW,EAAE,MAAA,CAAA,WAAoC;AAAtB,IAAA,QAAQ,EAAE,MAAA,CAAA;AAAY,GAA5E,E,IAAA,E,CAAA,E,2BAAA,C,mBACA,YAAA,CAKE,kBALF,EAKE;UAAA;AAHC,IAAA,WAAW,EAAE,MAAA,CAAA,WAGd;AAFC,IAAA,OAAK,EAAE,MAAA,CAAA,KAER;AADC,IAAA,QAAQ,EAAE,MAAA,CAAA;AACX,GALF,E,IAAA,E,CAAA,E,sCAAA,C,CAWI,EAFI,MAAA,CAAA,YAAA,KAAY,K,kBAHpB,YAAA,CAIE,oBAJF,EAIE;UAAA;AAHC,IAAA,QAAQ,EAAE,MAAA,CAAA,QAGX;AAFC,IAAA,SAAS,EAAE,MAAA,CAAA;AAEZ,GAJF,E,IAAA,E,CAAA,E,yBAAA,C,iCAKI,CA3BN,C","sourcesContent":["<template>\n  <div class=\"search\">\n    <form action=\"/\">\n      <van-search\n        v-model=\"value\"\n        show-action\n        :placeholder=\"placeholder\"\n        @update:model-value=\"values\"\n        @search=\"onSearch\"\n        shape=\"round\"\n        @cancel=\"onCancel\"\n        @focus=\"isresultshow = false\"\n      />\n    </form>\n\n    <Results v-if=\"isresultshow\" :value=\"value\" />\n    <Advice v-else-if=\"value\" :suggestlist=\"suggestlist\" :onSearch=\"onSearch\" />\n    <History\n      v-else\n      :historylist=\"historylist\"\n      @reset=\"reset\"\n      :onSearch=\"onSearch\"\n    />\n    <Hotsearch\n      :onSearch=\"onSearch\"\n      :hotsearch=\"hotsearch\"\n      v-if=\"isresultshow === false\"\n    />\n  </div>\n</template>\n\n<script>\nimport Hotsearch from \"./hotsearch.vue\";\nimport { ref, reactive, onMounted } from \"vue\";\nimport History from \"./history.vue\";\nimport Advice from \"./advice.vue\";\nimport Results from \"./results.vue\";\nimport { useRouter } from \"vue-router\";\nimport {\n  getcloudsearch,\n  getsearchdefault,\n  gethotsearch,\n  getsuggest,\n} from \"@/api/search.js\";\nexport default {\n  components: {\n    History,\n    Results,\n    Advice,\n    Hotsearch,\n  },\n  setup(props, { expose }) {\n    const value = ref(\"\");\n    const placeholder = ref(\"\");\n    const isresultshow = ref(false); //搜索结果的显示状态\n    const router = useRouter();\n    const historylist = ref([]); //历史搜索列表\n    const hotsearch = ref([]); //热搜列表\n    const suggestlist = ref([]);\n\n    onMounted(async () => {\n      const { data } = await getsearchdefault();\n      const res = await gethotsearch();\n      hotsearch.value = res.data.data;\n      placeholder.value = data.data.showKeyword;\n    });\n\n    const onSearch = async (val) => {\n      value.value = val;\n      if (val === \"\") {\n        value.value = placeholder.value;\n      }\n      /**\n       * @params 判断每次追加的元素在原来的数组中是否有，如果有直接删除有的那个元素在追加到首位\n       */\n      if (historylist.value.indexOf(value.value) !== -1) {\n        historylist.value.splice(historylist.value.indexOf(value.value), 1);\n      }\n      historylist.value.unshift(value.value);\n      localStorage.setItem(\"historylist\", JSON.stringify(historylist.value));\n      isresultshow.value = true;\n    };\n    const reset = () => {\n      historylist.value = [];\n    };\n    const values = async (val) => {\n      if (val.length === 0) return;\n\n      const { data } = await getsuggest({\n        type: \"mobile\",\n        keywords: val,\n      });\n      suggestlist.value = data.result.allMatch;\n    };\n    const onCancel = () => router.back();\n    return {\n      value,\n      router,\n      onSearch,\n      reset,\n      onCancel,\n      historylist,\n      isresultshow,\n      placeholder,\n      values,\n      suggestlist,\n      hotsearch,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.search {\n}\n</style>\n"],"sourceRoot":""}]}