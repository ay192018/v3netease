{"remainingRequest":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\album.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\album.vue","mtime":1648304806914},{"path":"D:\\HTML工程\\项目\\v3netease-main\\babel.config.js","mtime":1648433171114},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1646661867650},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1646661868754}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOlxcSFRNTFx1NURFNVx1N0EwQlxcXHU5ODc5XHU3NkVFXFx2M25ldGVhc2UtbWFpblxcbm9kZV9tb2R1bGVzXFxAdnVlXFxjbGktcGx1Z2luLWJhYmVsXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFx0b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOlxcSFRNTFx1NURFNVx1N0EwQlxcXHU5ODc5XHU3NkVFXFx2M25ldGVhc2UtbWFpblxcbm9kZV9tb2R1bGVzXFxAdnVlXFxjbGktcGx1Z2luLWJhYmVsXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBnZXRjbG91ZHNlYXJjaCB9IGZyb20gJ0AvYXBpL3NlYXJjaC5qcyc7CmltcG9ydCB7IGRhdGFsYnVtIH0gZnJvbSAnQC9VdGlsL2RheWpzLmpzJzsKaW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnYWxidW0nLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgX3JlZikgewogICAgdmFyIGF0dHJzID0gX3JlZi5hdHRyczsKICAgIHZhciBhbGJ1bSA9IHJlZihbXSk7CiAgICB2YXIgbG9hZGluZyA9IHJlZihmYWxzZSk7CiAgICB2YXIgZmluaXNoZWQgPSByZWYoZmFsc2UpOwogICAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwogICAgdmFyIG9mZnNldCA9IHJlZigxKTsKCiAgICB2YXIgb25Mb2FkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfYWxidW0kdmFsdWU7CgogICAgICAgIHZhciBfeWllbGQkZ2V0Y2xvdWRzZWFyY2gsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGF0dHJzLmF0dHJzLnZhbHVlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldGNsb3Vkc2VhcmNoKHsKICAgICAgICAgICAgICAgICAga2V5d29yZHM6IGF0dHJzLmF0dHJzLnZhbHVlLAogICAgICAgICAgICAgICAgICB0eXBlOiAxMCwKICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAob2Zmc2V0LnZhbHVlIC0gMSkgKiAzMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF95aWVsZCRnZXRjbG91ZHNlYXJjaCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGdldGNsb3Vkc2VhcmNoLmRhdGE7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEucmVzdWx0LmFsYnVtcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZmluaXNoZWQudmFsdWUgPSB0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgKF9hbGJ1bSR2YWx1ZSA9IGFsYnVtLnZhbHVlKS5wdXNoLmFwcGx5KF9hbGJ1bSR2YWx1ZSwgX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEucmVzdWx0LmFsYnVtcykpOwoKICAgICAgICAgICAgICAgIGxvYWRpbmcudmFsdWUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZXN1bHQuYWxidW1zLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBvZmZzZXQudmFsdWUrKzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gb25Mb2FkKCkgewogICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIGF0dHJzOiBhdHRycywKICAgICAgYWxidW06IGFsYnVtLAogICAgICBvbkxvYWQ6IG9uTG9hZCwKICAgICAgbG9hZGluZzogbG9hZGluZywKICAgICAgZmluaXNoZWQ6IGZpbmlzaGVkLAogICAgICBkYXRhbGJ1bTogZGF0YWxidW0sCiAgICAgIHJvdXRlcjogcm91dGVyCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\album.vue"],"names":[],"mappings":";;;AACA,SAAS,cAAT,QAA+B,iBAA/B;AACA,SAAS,QAAT,QAAyB,iBAAzB;AACA,SAAS,GAAT,QAAoB,KAApB;AACA,SAAS,SAAT,QAA0B,YAA1B;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,OADO;AAEb,EAAA,KAFa,iBAEP,KAFO,QAEW;AAAA,QAAT,KAAS,QAAT,KAAS;AACtB,QAAM,KAAI,GAAI,GAAG,CAAC,EAAD,CAAjB;AACA,QAAM,OAAM,GAAI,GAAG,CAAC,KAAD,CAAnB;AACA,QAAM,QAAO,GAAI,GAAG,CAAC,KAAD,CAApB;AACA,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,MAAK,GAAI,GAAG,CAAC,CAAD,CAAlB;;AACA,QAAM,MAAK;AAAA,0EAAI;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AACb,gBAAA,OAAO,CAAC,GAAR,CAAY,KAAK,CAAC,KAAN,CAAY,KAAxB;AADa;AAAA,uBAEU,cAAc,CAAC;AACpC,kBAAA,QAAQ,EAAE,KAAK,CAAC,KAAN,CAAY,KADc;AAEpC,kBAAA,IAAI,EAAE,EAF8B;AAGpC,kBAAA,MAAM,EAAE,CAAC,MAAM,CAAC,KAAP,GAAe,CAAhB,IAAqB;AAHO,iBAAD,CAFxB;;AAAA;AAAA;AAEL,gBAAA,IAFK,yBAEL,IAFK;;AAAA,oBAOR,IAAI,CAAC,MAAL,CAAY,MAPJ;AAAA;AAAA;AAAA;;AAAA,iDAQH,QAAQ,CAAC,KAAT,GAAiB,IARd;;AAAA;AAUb,gCAAA,KAAK,CAAC,KAAN,EAAY,IAAZ,wCAAoB,IAAI,CAAC,MAAL,CAAY,MAAhC;;AACA,gBAAA,OAAO,CAAC,KAAR,GAAgB,KAAhB;;AACA,oBAAI,IAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,MAAvB,EAA+B;AAC7B,kBAAA,MAAM,CAAC,KAAP;AACF,iBAFA,MAEO;AACL,kBAAA,QAAQ,CAAC,KAAT,GAAiB,IAAjB;AACF;;AAhBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAL,MAAK;AAAA;AAAA;AAAA,OAAX;;AAmBA,WAAO;AACL,MAAA,KAAK,EAAL,KADK;AAEL,MAAA,KAAK,EAAL,KAFK;AAGL,MAAA,MAAM,EAAN,MAHK;AAIL,MAAA,OAAO,EAAP,OAJK;AAKL,MAAA,QAAQ,EAAR,QALK;AAML,MAAA,QAAQ,EAAR,QANK;AAOL,MAAA,MAAM,EAAN;AAPK,KAAP;AASD;AApCY,CAAf","sourcesContent":["<script>\nimport { getcloudsearch } from '@/api/search.js';\nimport { datalbum } from '@/Util/dayjs.js';\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\n\nexport default {\n  name: 'album',\n  setup(props, { attrs }) {\n    const album = ref([]);\n    const loading = ref(false);\n    const finished = ref(false);\n    const router = useRouter();\n    const offset = ref(1);\n    const onLoad = async () => {\n      console.log(attrs.attrs.value);\n      const { data } = await getcloudsearch({\n        keywords: attrs.attrs.value,\n        type: 10,\n        offset: (offset.value - 1) * 30,\n      });\n      if (!data.result.albums) {\n        return (finished.value = true);\n      }\n      album.value.push(...data.result.albums);\n      loading.value = false;\n      if (data.result.albums.length) {\n        offset.value++;\n      } else {\n        finished.value = true;\n      }\n    };\n\n    return {\n      attrs,\n      album,\n      onLoad,\n      loading,\n      finished,\n      datalbum,\n      router,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.album {\n  background: #fff;\n  padding-bottom: 20px;\n  height: 80vh;\n  overflow-y: auto;\n  .content {\n    width: 60vw;\n    margin-left: 15px;\n    overflow: hidden;\n    height: 100%;\n    .title {\n      margin-right: 4px;\n      vertical-align: middle;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      display: block;\n\n      width: 80vw;\n    }\n    .describe {\n      font-size: 13px;\n      color: #dedede;\n    }\n  }\n}\n</style>\n\n<template>\n  <div class=\"album\">\n    <van-list v-model:loading=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\n      <van-cell\n        v-for=\"(item, index) in album\"\n        :key=\"index\"\n        clickable\n        @click=\"\n          router.push({\n            name: 'albumlist',\n            params: {\n              id: item.id,\n            },\n          })\n        \"\n      >\n        <template #icon>\n          <van-image width=\"50\" height=\"50\" radius=\"15\" :src=\"item.picUrl\" />\n        </template>\n        <template #title>\n          <div class=\"content\">\n            <span class=\"title\" style=\"overflow: hidden\">{{ item.name }}</span>\n            <span class=\"describe\">{{ `${item.artist.name} ${datalbum(item.publishTime)}` }}</span>\n          </div>\n        </template>\n      </van-cell>\n    </van-list>\n  </div>\n</template>\n"],"sourceRoot":""}]}