{"remainingRequest":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\babel-loader\\lib\\index.js!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\HTML工程\\项目\\v3netease-main\\src\\components\\comments\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\HTML工程\\项目\\v3netease-main\\src\\components\\comments\\index.vue","mtime":1643989866000},{"path":"D:\\HTML工程\\项目\\v3netease-main\\babel.config.js","mtime":1643989866000},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636397451353},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1636614324825},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636397451353},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1643212638233}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOlxcSFRNTFx1NURFNVx1N0EwQlxcXHU5ODc5XHU3NkVFXFx2M25ldGVhc2UtbWFpblxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDpcXEhUTUxcdTVERTVcdTdBMEJcXFx1OTg3OVx1NzZFRVxcdjNuZXRlYXNlLW1haW5cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IGNvbW1lbnQsIHNlbmRjb21tZW50IH0gZnJvbSAiQC9hcGkvY29tbW50cy5qcyI7CmltcG9ydCB7IGRhdGEgfSBmcm9tICJAL1V0aWwvZGF5anMuanMiOwppbXBvcnQgeyBUb2FzdCB9IGZyb20gInZhbnQiOwppbXBvcnQgeyByZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IHsgcmVhY3RpdmUgfSBmcm9tICJAdnVlL3J1bnRpbWUtY29yZSI7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IHBsYXlDb3VudCB9IGZyb20gIkAvVXRpbC9mbHR0ZXIuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzLCBfcmVmKSB7CiAgICB2YXIgYXR0cnMgPSBfcmVmLmF0dHJzOwogICAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwogICAgdmFyIGxvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgdmFyIGZpbmlzaGVkID0gcmVmKGZhbHNlKTsKICAgIHZhciBtZXNzYWdlID0gcmVmKCIiKTsKICAgIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICB2YXIgc2hvdyA9IHJlZihmYWxzZSk7CiAgICB2YXIgY29tbWVudHMgPSByZWFjdGl2ZSh7CiAgICAgIGNvbW1lbnQ6IFtdLAogICAgICB0b3RhbDogMCwKICAgICAgb2Zmc2V0OiAxCiAgICB9KTsKCiAgICB2YXIgb25DbGlja0xlZnQgPSBmdW5jdGlvbiBvbkNsaWNrTGVmdCgpIHsKICAgICAgcm91dGVyLmJhY2soKTsKICAgIH07CgogICAgdmFyIHNlbmRjb21taXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF95aWVsZCRzZW5kY29tbWVudCwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VuZGNvbW1lbnQoewogICAgICAgICAgICAgICAgICB0OiAxLAogICAgICAgICAgICAgICAgICB0eXBlOiBzdG9yZS5zdGF0ZS5mbGFnLAogICAgICAgICAgICAgICAgICBpZDogYXR0cnMuaWQsCiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UudmFsdWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfeWllbGQkc2VuZGNvbW1lbnQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRzZW5kY29tbWVudC5kYXRhOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gc2VuZGNvbW1pdCgpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICB2YXIgb25DbGlja3JpZ2h0ID0gZnVuY3Rpb24gb25DbGlja3JpZ2h0KCkgewogICAgICBUb2FzdCgi5YiG5Lqr5LqL5Lu2Iik7CiAgICB9OwoKICAgIHZhciBvbkxvYWQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfY29tbWVudHMkY29tbWVudDsKCiAgICAgICAgdmFyIF95aWVsZCRjb21tZW50LCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnQoewogICAgICAgICAgICAgICAgICBsaW1pdDogMTAsCiAgICAgICAgICAgICAgICAgIGlkOiBhdHRycy5pZCwKICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAoY29tbWVudHMub2Zmc2V0IC0gMSkgKiAyMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRjb21tZW50ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGNvbW1lbnQuZGF0YTsKICAgICAgICAgICAgICAgIGNvbW1lbnRzLnRvdGFsID0gZGF0YS50b3RhbDsKCiAgICAgICAgICAgICAgICAoX2NvbW1lbnRzJGNvbW1lbnQgPSBjb21tZW50cy5jb21tZW50KS5wdXNoLmFwcGx5KF9jb21tZW50cyRjb21tZW50LCBfdG9Db25zdW1hYmxlQXJyYXkoZGF0YS5jb21tZW50cykpOwoKICAgICAgICAgICAgICAgIGxvYWRpbmcudmFsdWUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb21tZW50cy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgY29tbWVudHMub2Zmc2V0Kys7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBmaW5pc2hlZC52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBvbkxvYWQoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgcmV0dXJuIHsKICAgICAgY29tbWVudHM6IGNvbW1lbnRzLAogICAgICBvbkNsaWNrTGVmdDogb25DbGlja0xlZnQsCiAgICAgIG9uQ2xpY2tyaWdodDogb25DbGlja3JpZ2h0LAogICAgICBkYXRhOiBkYXRhLAogICAgICBvbkxvYWQ6IG9uTG9hZCwKICAgICAgbG9hZGluZzogbG9hZGluZywKICAgICAgZmluaXNoZWQ6IGZpbmlzaGVkLAogICAgICBwbGF5Q291bnQ6IHBsYXlDb3VudCwKICAgICAgc2hvdzogc2hvdywKICAgICAgc3RvcmU6IHN0b3JlLAogICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICBzZW5kY29tbWl0OiBzZW5kY29tbWl0CiAgICB9OwogIH0KfTs="},{"version":3,"sources":["D:\\HTML工程\\项目\\v3netease-main\\src\\components\\comments\\index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"comments\">\n    <div class=\"fiexd\">\n      <van-nav-bar\n        :title=\"`评论(${comments.total})`\"\n        @click-left=\"onClickLeft\"\n        :border=\"false\"\n      >\n        <template #left>\n          <van-icon name=\"arrow-left\" color=\"#ccc\" size=\"25\" />\n        </template>\n        <template #right>\n          <van-icon\n            name=\"share-o\"\n            color=\"#ccc\"\n            size=\"25\"\n            @click=\"onClickright\"\n          />\n        </template>\n      </van-nav-bar>\n\n      <div class=\"void\"></div>\n      <div class=\"title\">评论区</div>\n    </div>\n    <div class=\"conaim\">\n      <van-list\n        v-model:loading=\"loading\"\n        :finished=\"finished\"\n        finished-text=\"没有更多了\"\n        @load=\"onLoad\"\n      >\n        <div\n          class=\"item\"\n          v-for=\"(item, index) in comments.comment\"\n          :key=\"index\"\n        >\n          <van-image\n            width=\"30px\"\n            height=\"30px\"\n            round\n            fit=\"cover\"\n            :src=\"item.user.avatarUrl\"\n          >\n            <template v-slot:loading>\n              <van-loading type=\"spinner\" size=\"10\" color=\"#000\" /> </template\n          ></van-image>\n          <div class=\"content\">\n            <div class=\"top\">\n              <div class=\"left\">\n                <div class=\"name\">{{ item.user.nickname }}</div>\n                <div class=\"time\">{{ data(item.time) }}</div>\n              </div>\n              <div class=\"right\">\n                {{ playCount(item.likedCount) }}\n                <van-icon\n                  :name=\"item.liked === false ? 'good-job-o' : 'good-job'\"\n                  size=\"25\"\n                />\n              </div>\n            </div>\n            <div class=\"bottom\" @click=\"show = !show\">\n              {{ item.content }}\n            </div>\n          </div>\n          <div class=\"van-hairline--bottom\"></div>\n        </div>\n      </van-list>\n    </div>\n    <van-popup v-model:show=\"show\" position=\"bottom\" :style=\"{ height: '10%' }\"\n      ><van-cell-group inset>\n        <van-field\n          v-model=\"message\"\n          rows=\"1\"\n          autosize\n          clickable\n          type=\"textarea\"\n          @click-right-icon=\"sendcommit\"\n          placeholder=\"听说爱评论的粉丝很多\"\n          ><template #right-icon>\n            <van-button size=\"small\" type=\"primary\" round>评论</van-button>\n          </template></van-field\n        >\n      </van-cell-group></van-popup\n    >\n    <div class=\"btn\">\n      <van-button type=\"primary\" size=\"large\" round @click=\"show = !show\"\n        >听说爱评论的粉丝很多</van-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport { comment, sendcomment } from \"@/api/commnts.js\";\nimport { data } from \"@/Util/dayjs.js\";\nimport { Toast } from \"vant\";\nimport { ref } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { reactive } from \"@vue/runtime-core\";\nimport { useStore } from \"vuex\";\nimport { playCount } from \"@/Util/fltter.js\";\nexport default {\n  setup(props, { attrs }) {\n    const router = useRouter();\n    const loading = ref(false);\n    const finished = ref(false);\n    const message = ref(\"\");\n    const store = useStore();\n    const show = ref(false);\n    const comments = reactive({\n      comment: [],\n      total: 0,\n      offset: 1,\n    });\n\n    const onClickLeft = () => {\n      router.back();\n    };\n    const sendcommit = async () => {\n      const { data } = await sendcomment({\n        t: 1,\n        type: store.state.flag,\n        id: attrs.id,\n        content: message.value,\n      });\n      console.log(data);\n    };\n    const onClickright = () => {\n      Toast(\"分享事件\");\n    };\n\n    const onLoad = async () => {\n      const { data } = await comment({\n        limit: 10,\n        id: attrs.id,\n        offset: (comments.offset - 1) * 20,\n      });\n\n      comments.total = data.total;\n      comments.comment.push(...data.comments);\n\n      loading.value = false;\n\n      if (data.comments.length) {\n        comments.offset++;\n      } else {\n        finished.value = true;\n      }\n    };\n    return {\n      comments,\n      onClickLeft,\n      onClickright,\n      data,\n      onLoad,\n      loading,\n      finished,\n      playCount,\n      show,\n      store,\n      message,\n      sendcommit,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.comments {\n  overflow-y: auto;\n  width: 100vw;\n  height: 100vh;\n  background: #fff;\n  z-index: 3000;\n  position: absolute;\n  .fiexd {\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    z-index: 3000;\n  }\n  /deep/ .van-nav-bar__title {\n    color: #000;\n    font-size: 13px;\n  }\n\n  .title,\n  .item {\n    padding: 10px 0;\n    width: 95vw;\n    margin: 0 auto;\n  }\n  .conaim {\n    width: 95vw;\n    height: auto;\n    margin: 100px auto 0;\n\n    padding-bottom: 50px;\n    .item {\n      display: flex;\n      .content {\n        margin-left: 8px;\n        width: 95vw-10px;\n        .top {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          .name {\n            padding-bottom: 5px;\n            font-size: 13px;\n          }\n          .time {\n            font-size: 10px;\n            color: #dedede;\n          }\n        }\n        .bottom {\n          margin: 8px 0;\n        }\n      }\n    }\n  }\n  .btn {\n    width: 100%;\n    height: 8%;\n    background: #fff;\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 1;\n  }\n}\n</style>\n"],"sourceRoot":""}]}