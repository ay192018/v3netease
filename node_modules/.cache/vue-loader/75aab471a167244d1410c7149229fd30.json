{"remainingRequest":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\HTML工程\\项目\\v3netease-main\\src\\views\\find\\index.vue?vue&type=style&index=0&id=71537c96&lang=less&scoped=true","dependencies":[{"path":"D:\\HTML工程\\项目\\v3netease-main\\src\\views\\find\\index.vue","mtime":1648422512821},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":1646661868435},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1646661868754},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-service\\node_modules\\postcss-loader\\src\\index.js","mtime":1646661868635},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\less-loader\\dist\\cjs.js","mtime":1646661833593},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1646661868754}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5maW5kY29uZW50IHsKICBzY3JvbGwtYmVoYXZpb3I6IGhpZGRlbjsKCiAgbWFyZ2luOiAwIGF1dG87CiAgb3ZlcmZsb3cteTogYXV0bzsKICBtYXJnaW4tdG9wOiA0NnB4OwogIGhlaWdodDogODUuNXZoOwogIHBhZGRpbmctYm90dG9tOiAxMDBweDsKfQo="},{"version":3,"sources":["D:\\HTML工程\\项目\\v3netease-main\\src\\views\\find\\index.vue"],"names":[],"mappings":";AA6KA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAEvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACvB","file":"D:/HTML工程/项目/v3netease-main/src/views/find/index.vue","sourceRoot":"","sourcesContent":["<script>\nimport Recommendlist from './components/recommendlist.vue';\nimport Search from './components/search.vue';\nimport Video from './components/video.vue';\nimport Banner from './components/banner.vue';\nimport Findicon from './components/Findicon.vue';\nimport RandomPlaylist from './RandomPlaylist.vue';\nimport Radar from './components/radar.vue';\nimport Scenario from './components/scenario.vue';\nimport Ranking from './ranking.vue';\nimport {\n  text,\n  looktitle,\n  lookbtn,\n  listtitle,\n  Dynamicbtn,\n  Videotext,\n  Dynamictitle,\n  recentVideo,\n  playlist,\n  radartitle,\n  radarbtn,\n  scenariotitle,\n  scenariobtn,\n  rankingtitle,\n  rankingbtn,\n} from '@/hooks/reactive';\nimport Look from './components/live.vue';\nimport { ref } from '@vue/reactivity';\nimport { Toast } from 'vant';\nimport { getfindinfo } from '@/api/banner.js';\nimport { onMounted, provide } from '@vue/runtime-core';\nexport default {\n  components: {\n    Search,\n    Banner,\n    Findicon,\n    Recommendlist,\n    Video,\n    Look,\n    RandomPlaylist,\n    Radar,\n    Scenario,\n    Ranking,\n  },\n  name: 'find',\n  setup() {\n    const loading = ref(false);\n    const refreshing = ref(false);\n    const finished = ref(false);\n    const banner = ref([]);\n    const video = ref([]);\n    const Radar = ref([]);\n    const scenario = ref([]);\n    const ranking = ref([]);\n\n    const extInfo = ref([]);\n\n    const cursor = ref('');\n\n    const Dynamic = ref([]);\n    const cookie = JSON.parse(localStorage.getItem('cookie'));\n    provide('Dynamic', Dynamic);\n    const onLoad = async () => {\n      const { data } = await getfindinfo({\n        cursor: cursor.value,\n      });\n\n      data.data.blocks.forEach((item) => {\n        if (item.blockCode === 'HOMEPAGE_BANNER') {\n          banner.value = item.extInfo.banners;\n          // ^轮播图\n        } else if (item.blockCode === 'HOMEPAGE_BLOCK_PLAYLIST_RCMD') {\n          playlist.value = item.creatives;\n          text.value = item.uiElement.button.text;\n          listtitle.value = item.uiElement.subTitle.title;\n          return new Promise((resolve) => {\n            resolve(playlist);\n          });\n          // ^推荐歌单\n        } else if (item.blockCode === 'HOMEPAGE_BLOCK_LISTEN_LIVE') {\n          extInfo.value = item.extInfo;\n          lookbtn.value = item.uiElement.button.text;\n          looktitle.value = item.uiElement.subTitle.title;\n          // ^LOOK直播\n        } else if (item.blockCode === 'HOMEPAGE_BLOCK_STYLE_RCMD') {\n          Dynamic.value = item.creatives;\n          Dynamicbtn.value = item.uiElement.button.text;\n          Dynamictitle.value = item.uiElement.subTitle.title;\n          // ^动态歌单\n        } else if (item.blockCode === 'HOMEPAGE_MUSIC_MLOG') {\n          // ^精选音乐视频\n          video.value = item.extInfo;\n          recentVideo.value = item.uiElement.subTitle.title;\n          Videotext.value = item.uiElement.button.text;\n        } else if (item.blockCode === 'HOMEPAGE_BLOCK_TOPLIST') {\n          // ^排行榜\n\n          ranking.value = item.creatives;\n          rankingtitle.value = item.uiElement.subTitle.title;\n          rankingbtn.value = item.uiElement.button.text;\n        } else if (item.blockCode === 'HOMEPAGE_BLOCK_MGC_PLAYLIST') {\n          // ^雷达歌单\n\n          Radar.value = item.creatives;\n          radartitle.value = item.uiElement.subTitle.title;\n          radarbtn.value = item.uiElement.button.text;\n        } else if (item.blockCode === 'HOMEPAGE_VOICELIST_RCMD') {\n          // ^\"热门播客\"\n          return;\n          /* video.value = item.extInfo;\n          rankingtitle.value = item.uiElement.subTitle.title;\n          Videotext.value = item.uiElement.button.text; */\n        } else if (item.blockCode === 'HOMEPAGE_BLOCK_OFFICIAL_PLAYLIST') {\n          // ^专属场景歌单\n          scenario.value = item.creatives;\n          scenariotitle.value = item.uiElement.subTitle.title;\n          scenariobtn.value = item.uiElement.button.text;\n        }\n      });\n      loading.value = false;\n      if (data.data.hasMore) {\n        cursor.value = data.data.cursor;\n      } else {\n        finished.value = true;\n      }\n    };\n    const onRefresh = async () => {\n      const { data } = await getfindinfo({\n        refresh: true,\n      });\n\n      cursor.value = data.data.cursor;\n\n      if (data.code === 200) {\n        for (let i = 0; i < data.data.blocks.length; i++) {\n          if (data.data.blocks[i].blockCode === 'HOMEPAGE_BANNER') {\n            banner.value = data.data.blocks[i].extInfo.banners;\n          } else if (data.data.blocks[i].blockCode === 'HOMEPAGE_BLOCK_PLAYLIST_RCMD') {\n            playlist.value = data.data.blocks[i].creatives;\n          } else if (data.data.blocks[i].blockCode === 'HOMEPAGE_BLOCK_LISTEN_LIVE') {\n            extInfo.value = data.data.blocks[i].extInfo;\n          } else if (data.data.blocks[i].showType === 'HOMEPAGE_BLOCK_STYLE_RCMD') {\n            Dynamic.value = data.data.blocks[i].creatives;\n            Dynamictitle.value = data.data.blocks[i].uiElement.subTitle.title;\n          }\n        }\n        refreshing.value = false;\n        Toast('刷新成功');\n      }\n    };\n\n    return {\n      refreshing,\n      loading,\n      onRefresh,\n      playlist,\n      cursor,\n      ranking,\n      finished,\n      onLoad,\n      video,\n      Radar,\n      banner,\n      scenario,\n      extInfo,\n      cookie,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.findconent {\n  scroll-behavior: hidden;\n\n  margin: 0 auto;\n  overflow-y: auto;\n  margin-top: 46px;\n  height: 85.5vh;\n  padding-bottom: 100px;\n}\n</style>\n\n<template>\n  <div class=\"animate__fadeIn animate__animated \">\n    <Search />\n    <div class=\"findconent\">\n      <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\" success-text=\"刷新成功\" :animation-duration=\"1000\">\n        <van-list\n          v-model:loading=\"loading\"\n          :finished=\"finished\"\n          :offset=\"800\"\n          finished-text=\"没有更多了\"\n          @load=\"onLoad\"\n        >\n          <div class=\"indexTop\">\n            <Banner :banner=\"banner\" />\n            <Findicon />\n            <div class=\"van-hairline--bottom auto\"></div>\n            <Recommendlist :playlist=\"playlist\" />\n          </div>\n\n          <Look :extInfo=\"extInfo\" v-if=\"cookie && extInfo.length\" />\n\n          <RandomPlaylist />\n          <Video v-if=\"video.length\" :video=\"video\" />\n          <Ranking v-if=\"cookie && ranking.length\" :ranking=\"ranking\" />\n          <Radar :playlist=\"Radar\" v-if=\"Radar.length\" />\n          <Scenario :playlist=\"scenario\" v-if=\"scenario.length\" />\n        </van-list>\n      </van-pull-refresh>\n    </div>\n  </div>\n</template>\n"]}]}