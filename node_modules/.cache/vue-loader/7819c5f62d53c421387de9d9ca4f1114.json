{"remainingRequest":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\HTML工程\\项目\\v3netease-main\\src\\components\\audio\\index.vue?vue&type=style&index=0&id=6050df9c&lang=less","dependencies":[{"path":"D:\\HTML工程\\项目\\v3netease-main\\src\\components\\audio\\index.vue","mtime":1648587632483},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":1646661868435},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1646661868754},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\@vue\\cli-service\\node_modules\\postcss-loader\\src\\index.js","mtime":1646661868635},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\less-loader\\dist\\cjs.js","mtime":1646661833593},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646661867738},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1646661868754}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5hdWRpbyB7CiAgdHJhbnNpdGlvbjogYm90dG9tIDAuOHM7CiAgei1pbmRleDogMTAwOwogIGJvcmRlci1yYWRpdXM6IDE1cHg7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA2dmg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y2ZjdmODsKICBwb3NpdGlvbjogZml4ZWQ7CiAgbGVmdDogMDsKICByaWdodDogMDsKCiAgLmNvbnRyb2xzIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICB3aWR0aDogOTV2dzsKICAgIG1hcmdpbjogMCBhdXRvOwogICAgLmxlZnQsCiAgICAucmlnaHQgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAuc29uZ25hbWUgewogICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4OwogICAgICAgIHdpZHRoOiAxOTBweDsKICAgICAgfQogICAgICAmIGkgewogICAgICAgIG1hcmdpbi1sZWZ0OiAzMHB4OwogICAgICB9CiAgICB9CiAgfQogIC5zbGlkZS1mYWRlLWVudGVyLWFjdGl2ZSB7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLW91dDsKICB9CgogIC5zbGlkZS1mYWRlLWxlYXZlLWFjdGl2ZSB7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC44cyBjdWJpYy1iZXppZXIoMSwgMC41LCAwLjgsIDEpOwogIH0KCiAgLnNsaWRlLWZhZGUtZW50ZXItZnJvbSwKICAuc2xpZGUtZmFkZS1sZWF2ZS10byB7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMjBweCk7CiAgICBvcGFjaXR5OiAwOwogIH0KICAucm90YXRlaW1nIHsKICAgIGFuaW1hdGlvbi1uYW1lOiBSb3RhdGU7CiAgICBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiBpbmZpbml0ZTsKICAgIGFuaW1hdGlvbi1wbGF5LXN0YXRlOiBwYXVzZWQ7CiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBsaW5lYXI7CiAgICBhbmltYXRpb24tZHVyYXRpb246IDVzOwogIH0KICAuYWN0aXZlIHsKICAgIGFuaW1hdGlvbi1wbGF5LXN0YXRlOiBydW5uaW5nOwogIH0KICBAa2V5ZnJhbWVzIFJvdGF0ZSB7CiAgICAwJSB7CiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOwogICAgfQogICAgMTAwJSB7CiAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["D:\\HTML工程\\项目\\v3netease-main\\src\\components\\audio\\index.vue"],"names":[],"mappings":"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","file":"D:/HTML工程/项目/v3netease-main/src/components/audio/index.vue","sourceRoot":"","sourcesContent":["<script>\nimport Info from './info.vue';\nimport { ref, watchEffect, nextTick } from 'vue';\nimport { useStore } from 'vuex';\nimport { Toast } from 'vant';\nimport Playlist from '../playlist/';\nimport { random } from '@/Util/fltter.js';\nimport { show } from '@/hooks/status.js';\nexport default {\n  name: 'Audio',\n  components: {\n    Info,\n    Playlist,\n  },\n  setup(props, { emit }) {\n    const audio = ref(null);\n    let currentTime = ref(0); //当前播放时间\n    let duration = ref(0); //当前歌曲长度\n    const store = useStore();\n    const playlist = ref(false);\n    const showPopup = () => {\n      if (store.state.songlist.length) {\n        show.value = true;\n      }\n    };\n    const playstate = () => {\n      playlist.value = !playlist.value;\n    };\n    /**\n     * @param {Boolean} 接收布尔值改变父级弹出层状态\n     */\n    const changeshow = (val) => {\n      show.value = val;\n    };\n    const canplay = () => {\n      Toast.clear();\n    };\n\n    const play = () => {\n      store.dispatch('setisplay');\n      if (store.state.isplay && store.state.audio.readyState == 4) {\n        store.state.audio.play();\n      } else {\n        store.state.audio.pause();\n      }\n    };\n    const ended = () => {\n      nextTick(() => {\n        store.dispatch('setisplay');\n        store.state.audio.pause();\n      });\n      if (store.state.songlist.length < store.state.curret + 2) {\n        Toast.fail('没有下一首咯');\n        return;\n      }\n      Toast.loading({\n        message: '加载中...',\n        forbidClick: true,\n        loadingType: 'spinner',\n      });\n      if (store.state.playmodel === 0) {\n        store.commit('setcurret', store.state.curret + 1);\n      } else if (store.state.playmodel === 1) {\n\n        store.commit('setcurret', random(0, store.state.songlist.length - 1));\n      } else {\n        store.commit('setcurret', store.state.curret);\n      }\n      nextTick(() => {\n        store.state.audio.play();\n        if (store.state.audio.played) {\n          store.dispatch('setisplay');\n          Toast.clear({\n            clearAll: true,\n          });\n        }\n      });\n    };\n    const playing = (e) => {\n      if (store.state.isplay === false) {\n        store.dispatch('setisplay');\n      }\n    };\n    /** @waiting\n     * @example 缓冲状态\n     */\n    const waiting = () => {\n      Toast.loading({\n        message: '加载中...',\n        forbidClick: true,\n        loadingType: 'spinner',\n      });\n    };\n    /**\n     * @event {事件对象}\n     */\n    const loadedmetadata = (e) => {\n      duration.value = e.target.duration;\n    };\n\n    const error = () => {\n      if (store.state.songlist.length === 0) {\n        return;\n      }\n      Toast.fail('此歌曲暂不能播放');\n      store.dispatch('setisplay');\n      nextTick(() => {\n        store.state.audio.pause();\n      });\n      store.dispatch('setsetcurret', store.state.curret + 1);\n      store.dispatch('setisplay');\n      nextTick(() => {\n        store.state.audio.play();\n      });\n    };\n    watchEffect(() => {\n      store.dispatch('setaudio', audio);\n    });\n    const onTimeupdate = (e) => {\n      currentTime.value = e.target.currentTime.toFixed(2);\n    };\n\n    return {\n      play,\n      onTimeupdate,\n      audio,\n      useStore,\n      ended,\n      random,\n      store,\n      error,\n      currentTime,\n      show,\n      showPopup,\n      changeshow,\n      playing,\n      waiting,\n      loadedmetadata,\n      duration,\n      playlist,\n      canplay,\n      playstate,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\">\n.audio {\n  transition: bottom 0.8s;\n  z-index: 100;\n  border-radius: 15px;\n  width: 100%;\n  height: 6vh;\n  background-color: #f6f7f8;\n  position: fixed;\n  left: 0;\n  right: 0;\n\n  .controls {\n    display: flex;\n    width: 95vw;\n    margin: 0 auto;\n    .left,\n    .right {\n      display: flex;\n      align-items: center;\n      .songname {\n        margin-left: 10px;\n        width: 190px;\n      }\n      & i {\n        margin-left: 30px;\n      }\n    }\n  }\n  .slide-fade-enter-active {\n    transition: all 0.3s ease-out;\n  }\n\n  .slide-fade-leave-active {\n    transition: all 0.8s cubic-bezier(1, 0.5, 0.8, 1);\n  }\n\n  .slide-fade-enter-from,\n  .slide-fade-leave-to {\n    transform: translateX(20px);\n    opacity: 0;\n  }\n  .rotateimg {\n    animation-name: Rotate;\n    animation-iteration-count: infinite;\n    animation-play-state: paused;\n    animation-timing-function: linear;\n    animation-duration: 5s;\n  }\n  .active {\n    animation-play-state: running;\n  }\n  @keyframes Rotate {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n}\n</style>\n\n<template>\n  <div class=\"audio\" @click=\"showPopup\">\n    <audio\n      ref=\"audio\"\n      @timeupdate=\"onTimeupdate\"\n      @error=\"error\"\n      :src=\"\n        useStore().state.songlist.length !== 0\n          ? `https://music.163.com/song/media/outer/url?id=${store.state.songlist[store.state.curret].id}.mp3`\n          : ''\n      \"\n      @playing=\"playing\"\n      @ended=\"ended\"\n      @waiting=\"waiting\"\n      @loadedmetadata=\"loadedmetadata\"\n      @canplay=\"canplay\"\n    ></audio>\n    <div class=\"controls\">\n      <div class=\"left\">\n        <van-image\n          width=\"6vh\"\n          height=\"6vh\"\n          round\n          fit=\"cover\"\n          class=\"rotateimg\"\n          :class=\"store.state.isplay && store.state.audio.played && store.state.audio.readyState === 4 ? 'active' : ''\"\n          :src=\"\n            useStore().state.songlist.length !== 0\n              ? useStore().state.songlist[useStore().state.curret].al.picUrl\n              : 'http://p3.music.126.net/tBTNafgjNnTL1KlZMt7lVA==/18885211718935735.jpg'\n          \"\n        >\n          <template v-slot:loading> <van-loading type=\"spinner\" size=\"10\" color=\"#000\" /> </template\n        ></van-image>\n\n        <span class=\"songname van-ellipsis\"\n          >{{\n            useStore().state.songlist.length !== 0\n              ? `${store.state.songlist[store.state.curret].name}-${\n                  store.state.songlist[store.state.curret].ar[0].name\n                }`\n              : '网易云音乐'\n          }}\n        </span>\n      </div>\n      <div class=\"right\">\n        <van-icon\n          :name=\"useStore().state.isplay ? 'pause-circle-o' : 'play-circle-o'\"\n          size=\"28\"\n          @click.stop=\"play\"\n        /><van-icon name=\"bars\" size=\"28\" @click.stop=\"playlist = !playlist\" />\n      </div>\n    </div>\n    <van-popup v-model:show=\"show\" position=\"bottom\" :style=\"{ height: '100%' }\" teleport=\"body\">\n      <Info\n        :show=\"show\"\n        @changeshow=\"changeshow\"\n        :currentTime=\"currentTime\"\n        :duration=\"duration\"\n        :play=\"play\"\n        v-model=\"currentTime\"\n        @playstate=\"playstate\"\n    /></van-popup>\n    <van-popup\n      v-model:show=\"playlist\"\n      position=\"bottom\"\n      :style=\"{ height: '70%', width: '95%', margin: '0 0 0 10px' }\"\n      teleport=\"body\"\n      round\n    >\n      <Playlist\n    /></van-popup>\n  </div>\n</template>\n"]}]}