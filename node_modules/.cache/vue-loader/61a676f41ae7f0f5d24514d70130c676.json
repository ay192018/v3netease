{"remainingRequest":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\index.vue?vue&type=template&id=002e8a58&scoped=true","dependencies":[{"path":"D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\index.vue","mtime":1643989866000},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1636614324825},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1643212638233},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636397451353},{"path":"D:\\HTML工程\\项目\\v3netease-main\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1643212638233}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0ic2VhcmNoIj4KICAgIDxmb3JtIGFjdGlvbj0iLyI+CiAgICAgIDx2YW4tc2VhcmNoCiAgICAgICAgdi1tb2RlbD0idmFsdWUiCiAgICAgICAgc2hvdy1hY3Rpb24KICAgICAgICA6cGxhY2Vob2xkZXI9InBsYWNlaG9sZGVyIgogICAgICAgIEB1cGRhdGU6bW9kZWwtdmFsdWU9InZhbHVlcyIKICAgICAgICBAc2VhcmNoPSJvblNlYXJjaCIKICAgICAgICBzaGFwZT0icm91bmQiCiAgICAgICAgQGNhbmNlbD0ib25DYW5jZWwiCiAgICAgICAgQGZvY3VzPSJpc3Jlc3VsdHNob3cgPSBmYWxzZSIKICAgICAgLz4KICAgIDwvZm9ybT4KCiAgICA8UmVzdWx0cyB2LWlmPSJpc3Jlc3VsdHNob3ciIDp2YWx1ZT0idmFsdWUiIC8+CiAgICA8QWR2aWNlIHYtZWxzZS1pZj0idmFsdWUiIDpzdWdnZXN0bGlzdD0ic3VnZ2VzdGxpc3QiIDpvblNlYXJjaD0ib25TZWFyY2giIC8+CiAgICA8SGlzdG9yeQogICAgICB2LWVsc2UKICAgICAgOmhpc3RvcnlsaXN0PSJoaXN0b3J5bGlzdCIKICAgICAgQHJlc2V0PSJyZXNldCIKICAgICAgOm9uU2VhcmNoPSJvblNlYXJjaCIKICAgIC8+CiAgICA8SG90c2VhcmNoCiAgICAgIDpvblNlYXJjaD0ib25TZWFyY2giCiAgICAgIDpob3RzZWFyY2g9ImhvdHNlYXJjaCIKICAgICAgdi1pZj0iaXNyZXN1bHRzaG93ID09PSBmYWxzZSIKICAgIC8+CiAgPC9kaXY+Cg=="},{"version":3,"sources":["D:\\HTML工程\\项目\\v3netease-main\\src\\views\\search\\index.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MAC9B,CAAC;IACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;IAEN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IAC7C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IAC3E,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9B,CAAC;EACH,CAAC,CAAC,CAAC,CAAC,CAAC","file":"D:/HTML工程/项目/v3netease-main/src/views/search/index.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"search\">\n    <form action=\"/\">\n      <van-search\n        v-model=\"value\"\n        show-action\n        :placeholder=\"placeholder\"\n        @update:model-value=\"values\"\n        @search=\"onSearch\"\n        shape=\"round\"\n        @cancel=\"onCancel\"\n        @focus=\"isresultshow = false\"\n      />\n    </form>\n\n    <Results v-if=\"isresultshow\" :value=\"value\" />\n    <Advice v-else-if=\"value\" :suggestlist=\"suggestlist\" :onSearch=\"onSearch\" />\n    <History\n      v-else\n      :historylist=\"historylist\"\n      @reset=\"reset\"\n      :onSearch=\"onSearch\"\n    />\n    <Hotsearch\n      :onSearch=\"onSearch\"\n      :hotsearch=\"hotsearch\"\n      v-if=\"isresultshow === false\"\n    />\n  </div>\n</template>\n\n<script>\nimport Hotsearch from \"./hotsearch.vue\";\nimport { ref, reactive, onMounted } from \"vue\";\nimport History from \"./history.vue\";\nimport Advice from \"./advice.vue\";\nimport Results from \"./results.vue\";\nimport { useRouter } from \"vue-router\";\nimport {\n  getcloudsearch,\n  getsearchdefault,\n  gethotsearch,\n  getsuggest,\n} from \"@/api/search.js\";\nexport default {\n  components: {\n    History,\n    Results,\n    Advice,\n    Hotsearch,\n  },\n  setup(props, { expose }) {\n    const value = ref(\"\");\n    const placeholder = ref(\"\");\n    const isresultshow = ref(false); //搜索结果的显示状态\n    const router = useRouter();\n    const historylist = ref([]); //历史搜索列表\n    const hotsearch = ref([]); //热搜列表\n    const suggestlist = ref([]);\n\n    onMounted(async () => {\n      const { data } = await getsearchdefault();\n      const res = await gethotsearch();\n      hotsearch.value = res.data.data;\n      placeholder.value = data.data.showKeyword;\n    });\n\n    const onSearch = async (val) => {\n      value.value = val;\n      if (val === \"\") {\n        value.value = placeholder.value;\n      }\n      /**\n       * @params 判断每次追加的元素在原来的数组中是否有，如果有直接删除有的那个元素在追加到首位\n       */\n      if (historylist.value.indexOf(value.value) !== -1) {\n        historylist.value.splice(historylist.value.indexOf(value.value), 1);\n      }\n      historylist.value.unshift(value.value);\n      localStorage.setItem(\"historylist\", JSON.stringify(historylist.value));\n      isresultshow.value = true;\n    };\n    const reset = () => {\n      historylist.value = [];\n    };\n    const values = async (val) => {\n      if (val.length === 0) return;\n\n      const { data } = await getsuggest({\n        type: \"mobile\",\n        keywords: val,\n      });\n      suggestlist.value = data.result.allMatch;\n    };\n    const onCancel = () => router.back();\n    return {\n      value,\n      router,\n      onSearch,\n      reset,\n      onCancel,\n      historylist,\n      isresultshow,\n      placeholder,\n      values,\n      suggestlist,\n      hotsearch,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.search {\n}\n</style>\n"]}]}