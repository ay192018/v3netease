{"version":3,"sources":["webpack:///./src/components/songsdetails/components/playall.vue?3993","webpack:///./src/components/songsdetails/components/playall.vue","webpack:///./src/mixin/index.js","webpack:///./src/components/songsdetails/components/playall.vue?e160","webpack:///./src/components/songsdetails/index.vue?d921","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./src/components/songsdetails/index.vue","webpack:///./src/components/songsdetails/index.vue?2f8e"],"names":["class","load","type","size","allsongs","item","index","key","play","name","ar","mv","bottom","right","duration","myMixin","mixins","setup","props","attrs","emit","id","router","store","songsdata","trackIds","forEach","value","push","ids","join","data","code","songs","length","fail","state","songlist","audio","played","curret","loading","message","forbidClick","loadingType","paused","dispatch","isplay","readyState","clear","clearAll","pause","playCount","__exports__","render","$","uncurryThis","IndexedObject","toIndexedObject","arrayMethodIsStrict","un$Join","ES3_STRINGS","Object","STRICT_METHOD","target","proto","forced","separator","this","undefined","style","border","fixed","onClickLeft","title","left","color","coverImgUrl","width","height","radius","src","show","fit","creator","avatarUrl","nickname","userId","profile","icon","round","description","disabled","issubscrib","subscribedCount","tocommnts","commentCount","shareCount","z-index","lock-scroll","tags","components","Playall","time","route","cookie","JSON","parse","localStorage","getItem","subscribed","confirm","confirmButtonText","then","t","catch","console","log","params","back","offset","playlist","split","error","scroll","e"],"mappings":"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","file":"js/chunk-571c063c.3eb40079.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./playall.vue?vue&type=style&index=0&id=0184d9d4&lang=less&scoped=true\"","<template>\n  <div class=\"playall\">\n    <van-loading\n      type=\"spinner\"\n      size=\"80px\"\n      class=\"loading\"\n      v-if=\"load === false\"\n    />\n    <div class=\"songslist auto\" v-else>\n      <div\n        class=\"item\"\n        v-for=\"(item, index) in allsongs\"\n        :key=\"index\"\n        @click=\"play(index)\"\n      >\n        <div class=\"left\">\n          <div class=\"index\">{{ index + 1 }}</div>\n          <!-- <van-image width=\"40\" height=\"40\" radius=\"15\" :src=\"item.al.picUrl\" /> -->\n          <div class=\"data\">\n            <div class=\"songname van-ellipsis\">\n              {{ item.name }}\n            </div>\n            <div class=\"songtitle van-ellipsis\">\n              {{ `${item.ar[0].name}--${item.name}` }}\n            </div>\n          </div>\n        </div>\n        <div class=\"icons\">\n          <van-icon\n            name=\"tv-o\"\n            v-if=\"item.mv\"\n            size=\"20\"\n            @click.stop=\"\n              router.push({\n                name: 'video',\n                params: {\n                  id: item.mv,\n                },\n              })\n            \"\n            class=\"tv\"\n          />\n          <van-icon name=\"ellipsis\" size=\"20\" />\n        </div>\n      </div>\n    <nut-backtop :bottom=\"150\" :right=\"50\" :duration=\"3000\" ></nut-backtop>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { myMixin } from \"@/mixin/index.js\";\nimport { playCount } from \"@/Util/fltter.js\";\nimport { getallsongs } from \"@/api/songsheet.js\";\nimport { ref, computed, watchEffect, nextTick } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\nimport { Toast } from \"vant\";\nexport default {\n  mixins: [myMixin],\n  setup(props, { attrs, emit }) {\n    const id = ref([]);\n    const allsongs = ref([]);\n    const router = useRouter();\n    const store = useStore();\n    const load = ref(false);\n    watchEffect(async () => {\n      attrs.songsdata.trackIds.forEach((item) => {\n        id.value.push(item.id);\n      });\n      if (ids) {\n        const { data } = await getallsongs({ ids: ids.value.join() });\n        if (data.code === 200) {\n          load.value = true;\n          allsongs.value = data.songs;\n          // console.log(data.songs);\n          emit(\"length\", allsongs.value.length);\n        } else {\n          Toast.fail(\"加载失败,也许歌曲太多了\");\n        }\n      }\n    });\n\n    /**\n     * @param {Number}传入索引\n     */\n    const play = (index) => {\n      if (\n        store.state.songlist.length &&\n        store.state.audio.played &&\n        index === store.state.curret\n      ) {\n        return;\n      }\n\n      Toast.loading({\n        message: \"加载中...\",\n        forbidClick: true,\n        loadingType: \"spinner\",\n      });\n      if (store.state.audio.paused) {\n        store.dispatch(\"setsonglist\", allsongs.value);\n        store.dispatch(\"setsetcurret\", index);\n        nextTick(() => {\n          store.state.audio.play();\n          store.dispatch(\"setisplay\");\n          if (store.state.isplay && store.state.audio.readyState == 4) {\n            Toast.clear({\n              clearAll: true,\n            });\n          }\n        });\n      } else {\n        nextTick(() => {\n          store.dispatch(\"setisplay\");\n          store.state.audio.pause();\n        });\n        store.dispatch(\"setsonglist\", allsongs.value);\n        store.dispatch(\"setsetcurret\", index);\n        nextTick(() => {\n          store.state.audio.play();\n          if (store.state.audio.played) {\n            store.dispatch(\"setisplay\");\n            Toast.clear({\n              clearAll: true,\n            });\n          }\n        });\n      }\n    };\n    const ids = computed(() => {\n      return id.value;\n    });\n\n    return {\n      allsongs,\n      playCount,\n      play,\n      myMixin,\n      load,\n      router,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.playall {\n  width: 95vw;\n  height: 65vh;\n  margin: 0 auto;\n\n  .songslist {\n    padding-bottom: 6vh;\n    .item {\n      margin-top: 10px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      .data {\n        max-width: 40vw;\n        margin-left: 10px;\n        .songname {\n          color: #5b5b5b;\n          font-size: 14px;\n          font-weight: bold;\n          margin-bottom: 14px;\n        }\n        .songtitle {\n          font-size: 10px;\n          color: #c4c4c4;\n        }\n      }\n    }\n  }\n  .left {\n    display: flex;\n    .index {\n      line-height: 47.02px;\n      margin-right: 8px;\n      font-size: 12px;\n    }\n  }\n  .loading {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n  .icons {\n    .tv {\n      margin-right: 15px;\n    }\n  }\n}\n</style>\n","export const myMixin = {\n\n};\n// export const play = (index) => {\n//   if (\n//     store.state.songlist.length &&\n//     store.state.audio.played &&\n//     index === store.state.curret\n//   ) {\n//     return;\n//   }\n\n//   Toast.loading({\n//     message: \"加载中...\",\n//     forbidClick: true,\n//     loadingType: \"spinner\",\n//   });\n//   if (store.state.audio.paused) {\n//     store.dispatch(\"setsonglist\", allsongs.value);\n//     store.dispatch(\"setsetcurret\", index);\n//     nextTick(() => {\n//       store.state.audio.play();\n//       store.dispatch(\"setisplay\");\n//       if (store.state.isplay && store.state.audio.readyState == 4) {\n//         Toast.clear({\n//           clearAll: true,\n//         });\n//       }\n//     });\n//   } else {\n//     nextTick(() => {\n//       store.dispatch(\"setisplay\");\n//       store.state.audio.pause();\n//     });\n//     store.dispatch(\"setsonglist\", allsongs.value);\n//     store.dispatch(\"setsetcurret\", index);\n//     nextTick(() => {\n//       store.state.audio.play();\n//       if (store.state.audio.played) {\n//         store.dispatch(\"setisplay\");\n//         Toast.clear({\n//           clearAll: true,\n//         });\n//       }\n//     });\n//   }\n// };\n","import { render } from \"./playall.vue?vue&type=template&id=0184d9d4&scoped=true\"\nimport script from \"./playall.vue?vue&type=script&lang=js\"\nexport * from \"./playall.vue?vue&type=script&lang=js\"\n\nimport \"./playall.vue?vue&type=style&index=0&id=0184d9d4&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\HTML工程\\\\项目\\\\v3netease-main\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0184d9d4\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=493a7632&lang=less&scoped=true\"","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar un$Join = uncurryThis([].join);\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return un$Join(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","<template>\n  <transition name=\"slide-fade\">\n    <div>\n      <van-nav-bar\n        :border=\"false\"\n        fixed\n        @click-left=\"onClickLeft\"\n        :title=\"songsdata.songs.name\"\n      >\n        <template #left>\n          <van-icon name=\"arrow-left\" size=\"23\" color=\"#ccc\" />\n        </template>\n        <template #right>\n          <van-icon name=\"ellipsis\" size=\"23\" color=\"#ccc\" />\n        </template>\n      </van-nav-bar>\n      <div\n        class=\"songdata\"\n        :style=\"`background-image: url(${songsdata.songs.coverImgUrl})`\"\n      >\n        <div class=\"content\">\n          <div class=\"left\">\n            <van-image\n              width=\"130\"\n              height=\"130\"\n              radius=\"15\"\n              :src=\"songsdata.songs.coverImgUrl\"\n              @click=\"show = true\"\n            >\n              <template v-slot:loading>\n                <van-loading type=\"spinner\" size=\"20\" color=\"#000\" />\n              </template>\n            </van-image>\n            <span class=\"count\">{{\n              playCount(songsdata.songs.playCount)\n            }}</span>\n          </div>\n          <div class=\"right info\">\n            <div class=\"titless\" @click=\"show = true\">\n              {{ songsdata.songs.name }}\n            </div>\n            <div class=\"userdata\">\n              <van-image\n                width=\"25\"\n                height=\"25\"\n                fit=\"cover\"\n                radius=\"50%\"\n                :src=\"songsdata.creator.avatarUrl\"\n              >\n                <template v-slot:loading>\n                  <van-loading\n                    type=\"spinner\"\n                    size=\"10\"\n                    color=\"#000\"\n                  /> </template\n              ></van-image>\n              <p\n                class=\"username\"\n                @click=\"\n                  router.push({\n                    name: 'user',\n                    params: {\n                      id: songsdata.creator.userId,\n                    },\n                  })\n                \"\n              >\n                {{ songsdata.creator.nickname }}\n              </p>\n              <van-button\n                type=\"primary\"\n                color=\"red\"\n                size=\"mini\"\n                icon=\"add-o\"\n                round\n                v-if=\"songsdata.creator.userId !== store.state.profile.userId\"\n                >关注</van-button\n              >\n            </div>\n            <div class=\"describe van-ellipsis\" @click=\"show = true\">\n              {{ songsdata.songs.description }}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"item\">\n        <div>\n          <van-button\n            color=\"#e8e8e8\"\n            :disabled=\"\n              songsdata.creator.userId === store.state.profile.userId\n                ? true\n                : false\n            \"\n            size=\"mini\"\n          >\n            <van-icon\n              :name=\"\n                songsdata.songs.subscribed ||\n                songsdata.creator.userId === store.state.profile.userId\n                  ? 'success'\n                  : 'add-o'\n              \"\n              @click=\"issubscrib\"\n              color=\"#323233\"\n              size=\"20\"\n          /></van-button>\n\n          <div>{{ playCount(songsdata.songs.subscribedCount) }}</div>\n        </div>\n        <div @click=\"tocommnts\">\n          <van-icon name=\"chat-o\" size=\"20\" />\n          <div>{{ playCount(songsdata.songs.commentCount) }}</div>\n        </div>\n        <div>\n          <van-icon name=\"share-o\" size=\"20\" />\n          <div>{{ playCount(songsdata.songs.shareCount) }}</div>\n        </div>\n      </div>\n      <div class=\"title\">\n        <van-icon name=\"play-circle-o\" size=\"20\" color=\"red\" />\n        <div>播放全部</div>\n        <div>({{ playCount(songsdata.length) }}首)</div>\n      </div>\n      <van-overlay\n        :show=\"show\"\n        @click=\"show = false\"\n        z-index=\"9999\"\n        :lock-scroll=\"false\"\n      >\n        <div class=\"wrapper\">\n          <div class=\"block\">\n            <div style=\"text-align: center\">\n              <van-image\n                width=\"100vw\"\n                height=\"100vh\"\n                style=\"\n                  filter: blur(40px);\n                  left: 0;\n                  position: absolute;\n                  z-index: -1;\n                \"\n                fit=\"cover\"\n                :src=\"songsdata.songs.coverImgUrl\"\n              />\n              <van-image\n                width=\"130\"\n                height=\"130\"\n                radius=\"15\"\n                style=\"margin-top: 80px; margin-bottom: 30px\"\n                :src=\"songsdata.songs.coverImgUrl\"\n              /><br />\n              <span class=\"titless\"> {{ songsdata.songs.name }} </span><br />\n              <div\n                class=\"van-hairline--bottom\"\n                style=\"\n                  width: 95vw;\n                  margin: 0 auto;\n                  margin-top: 30px;\n                  margin-bottom: 20px;\n                \"\n              ></div>\n            </div>\n            <div\n              style=\"\n                width: 95vw;\n                height: auto;\n                margin: 0 auto;\n                margin-top: 50px;\n                margin-bottom: 20px;\n                color: #dfdfdf;\n              \"\n            >\n              标签:\n              <span\n                class=\"label\"\n                v-for=\"(item, index) in songsdata.tags\"\n                :key=\"index\"\n                >{{ item }}</span\n              >\n            </div>\n            <p\n              v-for=\"(item, index) in songsdata.description\"\n              :key=\"index\"\n              style=\"color: #dfdfdf; margin-left: 10px\"\n            >\n              {{ item }}\n            </p>\n          </div>\n        </div>\n      </van-overlay>\n      <Playall :songsdata=\"songsdata\" @length=\"length\" />\n    </div>\n  </transition>\n</template>\n\n<script>\nimport Playall from \"./components/playall.vue\";\nimport { getsongsdetail, getsubscribe } from \"@/api/songsheet.js\";\n\nimport { onMounted, reactive, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { playCount } from \"@/Util/fltter.js\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { Toast, Dialog } from \"vant\";\n\nexport default {\n  components: { Playall },\n  setup(props, { attrs }) {\n    const songsdata = reactive({\n      songs: {},\n      creator: {},\n      trackIds: [],\n      length: 0,\n      time: null,\n      tags: [],\n      description: \"\",\n    });\n    const show = ref(false);\n    const router = useRouter();\n    const route = useRoute();\n    const store = useStore();\n    const cookie = JSON.parse(localStorage.getItem(\"profile\"));\n    const issubscrib = async () => {\n      if (songsdata.songs.subscribed) {\n        Dialog.confirm({\n          confirmButtonText: \"取消收藏\",\n          message: \"确定要取消收藏该歌单吗?\",\n        })\n          .then(async () => {\n            const { data } = await getsubscribe({\n              t: songsdata.songs.subscribed ? 2 : 1,\n              id: songsdata.creator.userId,\n            });\n            songsdata.songs.subscribed = !songsdata.songs.subscribed;\n            if (songsdata.songs.subscribed) {\n              Toast(\"歌单已收藏\");\n            } else {\n              Toast(\"取消收藏\");\n            }\n          })\n          .catch(() => {\n            // on cancel\n          });\n      } else {\n        const { data } = await getsubscribe({\n          t: songsdata.songs.subscribed ? 2 : 1,\n          id: songsdata.creator.userId,\n        });\n        console.log(data);\n        songsdata.songs.subscribed = !songsdata.songs.subscribed;\n        if (songsdata.songs.subscribed) {\n          Toast(\"歌单已收藏\");\n        } else {\n          Toast(\"取消收藏\");\n        }\n      }\n    };\n    const tocommnts = async () => {\n      store.dispatch(\"setflag\", 2);\n\n      router.push({\n        name: \"comments\",\n        params: {\n          id: attrs.id,\n        },\n      });\n    };\n\n    const onClickLeft = () => {\n      router.back();\n    };\n    const length = (length) => {\n      songsdata.length = length;\n    };\n    onMounted(async () => {\n      const { data } = await getsongsdetail({\n        id: attrs.id,\n        offset: 1,\n      });\n\n      try {\n        songsdata.songs = data.playlist;\n        songsdata.creator = data.playlist.creator;\n        songsdata.trackIds = data.playlist.trackIds;\n        songsdata.tags = data.playlist.tags;\n        songsdata.description = data.playlist.description.split(\"\\n\");\n      } catch (error) {\n        Toast.fail(\"加载失败,歌曲也许太多了\");\n      }\n    });\n    const scroll = (e) => {\n      console.log(e);\n    };\n\n    return {\n      onClickLeft,\n      songsdata,\n      playCount,\n      router,\n      route,\n      scroll,\n      store,\n      length,\n      attrs,\n      tocommnts,\n      show,\n      cookie,\n      issubscrib,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n/deep/ .van-nav-bar,\n.van-nav-bar__content,\n.van-nav-bar--fixed {\n  background: transparent;\n}\n/deep/ .van-image__img {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  z-index: -1;\n}\n.songdata {\n  width: 100%;\n  height: 33vh;\n  background-size: cover;\n\n  .content {\n    width: 95vw;\n    margin: 0 auto;\n    display: flex;\n    justify-content: space-between;\n    .left,\n    .right {\n      position: relative;\n      margin-top: 50px;\n      z-index: 5;\n    }\n    .title {\n      width: 100%;\n      color: #dfdfdf;\n      font-size: 14px;\n    }\n    .info {\n      width: 200px;\n      height: 130px;\n      .userdata {\n        display: flex;\n        align-items: center;\n        .username {\n          color: #dfdfdf;\n          margin-left: 5px;\n          margin-right: 5px;\n        }\n      }\n      .describe {\n        color: #dfdfdf;\n        width: 100%;\n        position: absolute;\n        bottom: 0;\n      }\n    }\n  }\n}\n.item {\n  width: 270px;\n  height: 40px;\n  background-color: #e8e8e8;\n  border-radius: 25px;\n  position: absolute;\n  top: 30vh;\n  left: 50%;\n  transform: translate(-50%);\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  & div {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    & div {\n      margin-left: 5px;\n    }\n  }\n}\n/deep/ .van-nav-bar__title {\n  color: #dfdfdf;\n  font-size: 12px;\n}\n.title {\n  margin-top: 5vh;\n  display: flex;\n  align-items: center;\n  & van-icon,\n  div {\n    font-size: 14px;\n    color: #414142;\n    font-weight: bold;\n    margin-left: 5px;\n  }\n}\n.titless {\n  overflow-x: hidden;\n  font-size: 13px;\n  color: #f0f0f0;\n}\n.wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n}\n\n.block {\n  width: 100vw;\n  height: 100vh;\n}\n.label {\n  margin-left: 5px;\n}\n</style>\n","import { render } from \"./index.vue?vue&type=template&id=493a7632&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=493a7632&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\HTML工程\\\\项目\\\\v3netease-main\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-493a7632\"]])\n\nexport default __exports__"],"sourceRoot":""}